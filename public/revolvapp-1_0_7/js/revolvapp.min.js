!function(){var t={settings:{},post:function(t){return new e("post",t)},get:function(t){return new e("get",t)}},e=function(e,i){var s={method:e,url:"",before:function(){},success:function(){},error:function(){},data:!1,async:!0,headers:{}};this.p=this.extend(s,i),this.p=this.extend(this.p,t.settings),this.p.method=this.p.method.toUpperCase(),this.prepareData(),this.xhr=new XMLHttpRequest,this.xhr.open(this.p.method,this.p.url,this.p.async),this.setHeaders(),!1!==("function"!=typeof this.p.before||this.p.before(this.xhr))&&this.send()};e.prototype={extend:function(t,e){if(e)for(var i in e)t[i]=e[i];return t},prepareData:function(){"POST"!==this.p.method||this.isFormData()||(this.p.headers["Content-Type"]="application/x-www-form-urlencoded"),"object"!=typeof this.p.data||this.isFormData()||(this.p.data=this.toParams(this.p.data)),"GET"===this.p.method&&(this.p.url=this.p.data?this.p.url+"?"+this.p.data:this.p.url)},setHeaders:function(){for(var t in this.xhr.setRequestHeader("X-Requested-With",this.p.headers["X-Requested-With"]||"XMLHttpRequest"),this.p.headers)this.xhr.setRequestHeader(t,this.p.headers[t])},isFormData:function(){return void 0!==window.FormData&&this.p.data instanceof window.FormData},isComplete:function(){return!(this.xhr.status<200||this.xhr.status>=300&&304!==this.xhr.status)},send:function(){this.p.async?(this.xhr.onload=this.loaded.bind(this),this.xhr.send(this.p.data)):(this.xhr.send(this.p.data),this.loaded.call(this))},loaded:function(){if(this.isComplete()){var t=this.xhr.response,e=this.parseJson(t);t=e||t,"function"==typeof this.p.success&&this.p.success(t,this.xhr)}else"function"==typeof this.p.error&&this.p.error(this.xhr.statusText)},parseJson:function(t){try{var e=JSON.parse(t);if(e&&"object"==typeof e)return e}catch(t){}return!1},toParams:function(t){return Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}};var i=[0],s="data"+(new Date).getTime(),o="is-hidden",a="is-hidden-mobile",n=function(t,e){return this.parse(t,e)};n.ready=function(t){"loading"!=document.readyState?t():document.addEventListener("DOMContentLoaded",t)},n.prototype={get dom(){return!0},get length(){return this.nodes.length},parse:function(t,e){var i;if(t){if(t.dom)return this.nodes=t.nodes,t;i="string"!=typeof t?t.nodeType&&11===t.nodeType?t.childNodes:t.nodeType||t===window?[t]:t:/^\s*<(\w+|!)[^>]*>/.test(t)?this.create(t):this._query(t,e)}else i=[];this.nodes=this._slice(i)},create:function(t){if(/^<(\w+)\s*\/?>(?:<\/\1>|)$/.test(t))return[document.createElement(RegExp.$1)];var e=[],i=document.createElement("div"),s=i.childNodes;i.innerHTML=t;for(var o=0,a=s.length;o<a;o++)e.push(s[o]);return e},add:function(t){this.nodes=this.nodes.concat(this._toArray(t))},get:function(t){return this.nodes[t||0]||!1},getAll:function(){return this.nodes},eq:function(t){return new n(this.nodes[t])},first:function(){return new n(this.nodes[0])},last:function(){return new n(this.nodes[this.nodes.length-1])},contents:function(){return this.get().childNodes},each:function(t){for(var e=this.nodes.length,i=0;i<e;i++)t.call(this,this.nodes[i].dom?this.nodes[i].get():this.nodes[i],i);return this},is:function(t){return this.filter(t).length>0},filter:function(t){var e;return void 0===t?this:(e="function"==typeof t?t:function(e){return t instanceof Node?t===e:t&&t.dom?-1!==t.nodes.indexOf(e):(e.matches=e.matches||e.msMatchesSelector||e.webkitMatchesSelector,1===e.nodeType&&e.matches(t||"*"))},new n(this.nodes.filter(e)))},not:function(t){return this.filter(function(e){return!new n(e).is(t||!0)})},find:function(t){var e=[];return this.each(function(i){for(var s=this._query(t||"*",i),o=0;o<s.length;o++)e.push(s[o])}),new n(e)},children:function(t){var e=[];return this.each(function(t){if(t.children)for(var i=t.children,s=0;s<i.length;s++)e.push(i[s])}),new n(e).filter(t)},parent:function(t){var e=[];return this.each(function(t){t.parentNode&&e.push(t.parentNode)}),new n(e).filter(t)},parents:function(t,e){e=this._getContext(e);var i=[];return this.each(function(s){for(var o=s.parentNode;o&&o!==e;)t?new n(o).is(t)&&i.push(o):i.push(o),o=o.parentNode}),new n(i)},closest:function(t,e){e=this._getContext(e);var i=[],s=(t=t.dom?t.get():t)&&t.nodeType;return this.each(function(o){do{if(s&&o===t||new n(o).is(t))return i.push(o)}while((o=o.parentNode)&&o!==e)}),new n(i)},next:function(t){return this._getSibling(t,"nextSibling")},nextElement:function(t){return this._getSibling(t,"nextElementSibling")},prev:function(t){return this._getSibling(t,"previousSibling")},prevElement:function(t){return this._getSibling(t,"previousElementSibling")},css:function(t,e){if(void 0===e&&"object"!=typeof t){var i=this.get();return"width"===t||"height"===t?i.style?this._getHeightOrWidth(t,i,!1)+"px":void 0:i.style?getComputedStyle(i,null)[t]:void 0}return this.each(function(i){var s={};for(var o in"object"==typeof t?s=t:s[t]=e,s)i.style&&(i.style[o]=s[o])})},attr:function(t,e,i){if(i=i?"data-":"",void 0===e&&"object"!=typeof t){var s=this.get();return s&&3!==s.nodeType?"checked"===t?s.checked:this._getBooleanFromStr(s.getAttribute(i+t)):void 0}return this.each(function(s){var o={};for(var a in"object"==typeof t?o=t:o[t]=e,o)3!==s.nodeType&&("checked"===a?s.checked=o[a]:s.setAttribute(i+a,o[a]))})},data:function(t,e){if(void 0===t){var i=/^data\-(.+)$/,s=this.get().attributes,o={},a=function(t){return t[1].toUpperCase()};for(var n in s)if(s[n]&&i.test(s[n].nodeName)){var r=s[n].nodeName.match(i)[1],l=s[n].value;r=r.replace(/-([a-z])/g,a),l=this._isObjectString(l)?this._toObject(l):this._isNumber(l)?parseFloat(l):this._getBooleanFromStr(l),o[r]=l}return o}return this.attr(t,e,!0)},val:function(t){if(void 0===t){var e=this.get();return e.type&&"checkbox"===e.type?e.checked:e.value}return this.each(function(e){e.value=t})},removeAttr:function(t){return this.each(function(e){t.split(" ").forEach(function(t){3!==e.nodeType&&e.removeAttribute(t)})})},removeData:function(t){return this.each(function(e){t.split(" ").forEach(function(t){3!==e.nodeType&&e.removeAttribute("data-"+t)})})},dataset:function(t,e){return this.each(function(s){i[this.dataindex(s)][t]=e})},dataget:function(t){return i[this.dataindex(this.get())][t]},dataindex:function(t){var e=t[s],o=i.length;return e||(e=t[s]=o,i[e]={}),e},addClass:function(t){return this._eachClass(t,"add")},removeClass:function(t){return this._eachClass(t,"remove")},toggleClass:function(t){return this._eachClass(t,"toggle")},hasClass:function(t){return this.nodes.some(function(e){return!!e.classList&&e.classList.contains(t)})},empty:function(){return this.each(function(t){t.innerHTML=""})},html:function(t){return void 0===t?this.get().innerHTML||"":this.empty().append(t)},text:function(t){return void 0===t?this.get().textContent||"":this.each(function(e){e.textContent=t})},after:function(t){return this._inject(t,function(t,e){if("string"==typeof t)e.insertAdjacentHTML("afterend",t);else for(var i=t instanceof Node?[t]:this._toArray(t).reverse(),s=0;s<i.length;s++)e.parentNode.insertBefore(i[s],e.nextSibling);return e})},before:function(t){return this._inject(t,function(t,e){if("string"==typeof t)e.insertAdjacentHTML("beforebegin",t);else for(var i=t instanceof Node?[t]:this._toArray(t),s=0;s<i.length;s++)e.parentNode.insertBefore(i[s],e);return e})},append:function(t){return this._inject(t,function(t,e){if("string"==typeof t||"number"==typeof t)e.insertAdjacentHTML("beforeend",t);else for(var i=t instanceof Node?[t]:this._toArray(t),s=0;s<i.length;s++)e.appendChild(i[s]);return e})},prepend:function(t){return this._inject(t,function(t,e){if("string"==typeof t||"number"==typeof t)e.insertAdjacentHTML("afterbegin",t);else for(var i=t instanceof Node?[t]:this._toArray(t).reverse(),s=0;s<i.length;s++)e.insertBefore(i[s],e.firstChild);return e})},wrap:function(t){return this._inject(t,function(t,e){var i="string"==typeof t||"number"==typeof t?this.create(t)[0]:t instanceof Node?t:this._toArray(t)[0];return e.parentNode&&e.parentNode.insertBefore(i,e),i.appendChild(e),new n(i)})},unwrap:function(){return this.each(function(t){var e=new n(t);return e.replaceWith(e.contents())})},replaceWith:function(t){return this._inject(t,function(t,e){for(var i=document.createDocumentFragment(),s="string"==typeof t||"number"==typeof t?this.create(t):t instanceof Node?[t]:this._toArray(t),o=0;o<s.length;o++)i.appendChild(s[o]);var a=i.childNodes[0];return e.parentNode.replaceChild(i,e),a})},remove:function(){return this.each(function(t){t.parentNode&&t.parentNode.removeChild(t)})},clone:function(t){var e=[];return this.each(function(i){var s=this._clone(i);t&&(s=this._cloneEvents(i,s)),e.push(s)}),new n(e)},show:function(){return this.each(function(t){if(t.style&&this._hasDisplayNone(t)){var e,i=t.getAttribute("domTargetShow"),s=!!t.classList&&t.classList.contains(o),n=!!t.classList&&t.classList.contains(a);s?(e=o,t.classList.remove(o)):n?(e=a,t.classList.remove(a)):t.style.display=i||"block",e&&t.setAttribute("domTargetHide",e),t.removeAttribute("domTargetShow")}}.bind(this))},hide:function(){return this.each(function(t){if(t.style&&!this._hasDisplayNone(t)){var e=t.style.display,i=t.getAttribute("domTargetHide");i===o?t.classList.add(o):i===a?t.classList.add(a):("block"!==e&&t.setAttribute("domTargetShow",e),t.style.display="none"),t.removeAttribute("domTargetHide")}})},scrollTop:function(t){var e=this.get(),i=e===window,s=9===e.nodeType,o=s?document.scrollingElement||document.body.parentNode||document.body||document.documentElement:e;if(void 0===t)return s?void 0!==window.pageYOffset?window.pageYOffset:document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0:i?window.pageYOffset:o.scrollTop;i?window.scrollTo(0,t):o.scrollTop=t},offset:function(){return this._getDim("Offset")},position:function(){return this._getDim("Position")},width:function(t,e){return this._getSize("width","Width",t,e)},height:function(t,e){return this._getSize("height","Height",t,e)},outerWidth:function(){return this._getInnerOrOuter("width","outer")},outerHeight:function(){return this._getInnerOrOuter("height","outer")},innerWidth:function(){return this._getInnerOrOuter("width","inner")},innerHeight:function(){return this._getInnerOrOuter("height","inner")},click:function(){return this._triggerEvent("click")},focus:function(){return this._triggerEvent("focus")},trigger:function(t){return this.each(function(e){for(var i=t.split(" "),s=0;s<i.length;s++){var o;try{o=new window.CustomEvent(i[s],{bubbles:!0,cancelable:!0})}catch(t){(o=document.createEvent("CustomEvent")).initCustomEvent(i[s],!0,!0)}e.dispatchEvent(o)}})},on:function(t,e,i){return this.each(function(s){for(var o=t.split(" "),a=0;a<o.length;a++){var n=this._getEventName(o[a]),r=this._getEventNamespace(o[a]);e=i?this._getOneHandler(e,t):e,s.addEventListener(n,e),s._e=s._e||{},s._e[r]=s._e[r]||{},s._e[r][n]=s._e[r][n]||[],s._e[r][n].push(e)}})},one:function(t,e){return this.on(t,e,!0)},off:function(t,e){var i=function(t,e,i){return t===i},s=function(t,e,i,s){return e===s},o=function(t,e,i,s){return t===i&&e===s},a=function(){return!0};return void 0===t?this.each(function(t){this._offEvent(t,!1,!1,e,a)}):this.each(function(a){for(var n=t.split(" "),r=0;r<n.length;r++){var l=this._getEventName(n[r]),h=this._getEventNamespace(n[r]);"_events"===h?this._offEvent(a,l,h,e,i):l||"_events"===h?this._offEvent(a,l,h,e,o):this._offEvent(a,l,h,e,s)}})},serialize:function(t){for(var e={},i=this.get().elements,s=0;s<i.length;s++){var o=i[s];if((!/(checkbox|radio)/.test(o.type)||o.checked)&&(o.name&&!o.disabled&&"file"!==o.type)){if("select-multiple"===o.type)for(var a=0;a<o.options.length;a++){var n=o.options[a];n.selected&&(e[o.name]=n.value)}e[o.name]=this._isNumber(o.value)?parseFloat(o.value):this._getBooleanFromStr(o.value)}}return t?e:this._toParams(e)},ajax:function(t,i){if(void 0!==e){var s=this.attr("method")||"post",o={url:this.attr("action"),data:this.serialize(),success:t,error:i};return new e(s,o)}},_queryContext:function(t,e){return 3!==(e=this._getContext(e)).nodeType&&"function"==typeof e.querySelectorAll?e.querySelectorAll(t):[]},_query:function(t,e){if(e)return this._queryContext(t,e);if(/^[.#]?[\w-]*$/.test(t)){if("#"===t[0]){var i=document.getElementById(t.slice(1));return i?[i]:[]}return"."===t[0]?document.getElementsByClassName(t.slice(1)):document.getElementsByTagName(t)}return document.querySelectorAll(t)},_getContext:function(t){return(t="string"==typeof t?document.querySelector(t):t)&&t.dom?t.get():t||document},_inject:function(t,e){for(var i=this.nodes.length,s=[];i--;){var o="function"==typeof t?t.call(this,this.nodes[i]):t,a=0===i?o:this._clone(o),r=e.call(this,a,this.nodes[i]);r&&(r.dom?s.push(r.get()):s.push(r))}return new n(s)},_cloneEvents:function(t,e){var i=t._e;if(i)for(var s in e._e=i,i._events)for(var o=0;o<i._events[s].length;o++)e.addEventListener(s,i._events[s][o]);return e},_clone:function(t){if(void 0!==t)return"string"==typeof t?t:t instanceof Node||t.nodeType?t.cloneNode(!0):"length"in t?[].map.call(this._toArray(t),function(t){return t.cloneNode(!0)}):void 0},_slice:function(t){return t&&0!==t.length?t.length?[].slice.call(t.nodes||t):[t]:[]},_eachClass:function(t,e){return this.each(function(i){if(t){t.split(" ").forEach(function(t){i.classList&&i.classList[e](t)})}})},_triggerEvent:function(t){var e=this.get();return e&&3!==e.nodeType&&e[t](),this},_getOneHandler:function(t,e){var i=this;return function(){t.apply(this,arguments),i.off(e)}},_getEventNamespace:function(t){var e=t.split("."),i=e[1]?e[1]:"_events";return e[2]?i+e[2]:i},_getEventName:function(t){return t.split(".")[0]},_offEvent:function(t,e,i,s,o){for(var a in t._e)for(var n in t._e[a])if(o(n,a,e,i))for(var r=t._e[a][n],l=0;l<r.length;l++)void 0!==s&&r[l].toString()!==s.toString()||(t.removeEventListener(n,r[l]),t._e[a][n].splice(l,1),0===t._e[a][n].length&&delete t._e[a][n],0===Object.keys(t._e[a]).length&&delete t._e[a])},_getInnerOrOuter:function(t,e){return this[t](void 0,e)},_getDocSize:function(t,e){var i=t.body,s=t.documentElement;return Math.max(i["scroll"+e],i["offset"+e],s["client"+e],s["scroll"+e],s["offset"+e])},_getSize:function(t,e,i,s){if(void 0===i){var o=this.get();return i=3===o.nodeType?0:9===o.nodeType?this._getDocSize(o,e):o===window?window["inner"+e]:this._getHeightOrWidth(t,o,s||"normal"),Math.round(i)}return this.each(function(e){i=parseFloat(i),i+=this._adjustResultHeightOrWidth(t,e,s||"normal"),new n(e).css(t,i+"px")}.bind(this))},_getHeightOrWidth:function(t,e,i){if(!e)return 0;var s=t.charAt(0).toUpperCase()+t.slice(1),o=0,a=getComputedStyle(e,null),r=new n(e),l=r.parents().filter(function(t){return 1===t.nodeType&&"none"===getComputedStyle(t,null).display&&t});if("none"===a.display&&l.add(e),0!==l.length){var h="visibility: hidden !important; display: block !important;",d=[];l.each(function(t){var e=new n(t),i=e.attr("style");null!==i&&d.push(i),e.attr("style",null!==i?i+";"+h:h)}),o=r.get()["offset"+s]-this._adjustResultHeightOrWidth(t,e,i),l.each(function(t,e){var i=new n(t);void 0===d[e]?i.removeAttr("style"):i.attr("style",d[e])})}else o=e["offset"+s]-this._adjustResultHeightOrWidth(t,e,i);return o},_adjustResultHeightOrWidth:function(t,e,i){if(!e||!1===i)return 0;var s=0,o=getComputedStyle(e,null),a="border-box"===o.boxSizing;return"height"===t?(("inner"===i||"normal"===i&&a)&&(s+=(parseFloat(o.borderTopWidth)||0)+(parseFloat(o.borderBottomWidth)||0)),"outer"===i&&(s-=(parseFloat(o.marginTop)||0)+(parseFloat(o.marginBottom)||0))):(("inner"===i||"normal"===i&&a)&&(s+=(parseFloat(o.borderLeftWidth)||0)+(parseFloat(o.borderRightWidth)||0)),"outer"===i&&(s-=(parseFloat(o.marginLeft)||0)+(parseFloat(o.marginRight)||0))),s},_getDim:function(t){var e=this.get();return 3===e.nodeType?{top:0,left:0}:this["_get"+t](e)},_getPosition:function(t){return{top:t.offsetTop,left:t.offsetLeft}},_getOffset:function(t){var e=t.getBoundingClientRect(),i=t.ownerDocument,s=i.documentElement,o=i.defaultView;return{top:e.top+o.pageYOffset-s.clientTop,left:e.left+o.pageXOffset-s.clientLeft}},_getSibling:function(t,e){var i,s=(t=t&&t.dom?t.get():t)&&t.nodeType;return this.each(function(o){for(;o=o[e];)if(s&&o===t||new n(o).is(t))return void(i=o)}),new n(i)},_toArray:function(t){if(t instanceof NodeList){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e}return void 0===t?[]:t.dom?t.nodes:t},_toParams:function(t){var e="";for(var i in t)e+="&"+this._encodeUri(i)+"="+this._encodeUri(t[i]);return e.replace(/^&/,"")},_toObject:function(t){return new Function("return "+t)()},_encodeUri:function(t){return encodeURIComponent(t).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")},_isNumber:function(t){return!isNaN(t)&&!isNaN(parseFloat(t))},_isObjectString:function(t){return-1!==t.search(/^{/)},_getBooleanFromStr:function(t){return"true"===t||"false"!==t&&t},_hasDisplayNone:function(t){return"none"===t.style.display||"none"===(t.currentStyle?t.currentStyle.display:getComputedStyle(t,null).display)}};var r=0,l=function(t,e){return h(t,e,[].slice.call(arguments,2))};l.app=[],l.version="1.0.7",l.options={},l.modules={},l.services={},l.plugins={},l.classes={},l.extends={},l.lang={},l.dom=function(t,e){return new n(t,e)},l.ajax=t,l.Dom=n,l.env={module:"modules",service:"services",plugin:"plugins",class:"classes",extend:"extends"};var h=function(t,e,i){for(var s,o="revolvapp",a=Array.isArray(t)?t:t&&t.nodeType?[t]:document.querySelectorAll(t),n="string"==typeof e||"function"==typeof e,h="destroy"===e,c=[],p=0;p<a.length;p++){var u,f=a[p],g=l.dom(f);if((s=g.dataget(o))||n||(s=new d(f,e,r),g.dataset(o,s),g.attr("data-uuid",r),l.app[r]=s,r++),s&&n)if("function"==typeof(e=h?"stop":e)?u=e.apply(s,i):(i.unshift(e),u=s.api.apply(s,i)),void 0!==u&&c.push(u),h){var m=g.attr("data-uuid");g.dataset(o,!1),l.app.splice(m,1)}}return 0===c.length||1===c.length?0===c.length?s:c[0]:c};l.add=function(t,e,i){if(void 0!==l.env[t])if(i.translations&&(l.lang=l.extend(!0,{},l.lang,i.translations)),"extend"===t)l[l.env[t]][e]=i;else{var s=function(){};if(s.prototype=i,i.extends)for(var o=0;o<i.extends.length;o++)l.inherit(s,l.extends[i.extends[o]]);l[l.env[t]][e]=s}},l.addLang=function(t,e){void 0===l.lang[t]&&(l.lang[t]={}),l.lang[t]=l.extend(l.lang[t],e)},l.create=function(t){var e=t.split("."),i=[].slice.call(arguments,1),s="classes";void 0!==l.env[e[0]]&&(s=l.env[e[0]],t=e.slice(1).join("."));var o=new l[s][t];if(o._type=e[0],o._name=t,o.init){var a=o.init.apply(o,i);return a||o}return o},l.inherit=function(t,e){var i=function(){};i.prototype=e;var s=new i;for(var o in t.prototype)t.prototype.__lookupGetter__(o)?s.__defineGetter__(o,t.prototype.__lookupGetter__(o)):s[o]=t.prototype[o];return t.prototype=s,t.prototype.super=e,t},l.error=function(t){throw t},l.extend=function(){var t={},e=!1,i=0,s=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],i++);for(var o=function(i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e&&"[object Object]"===Object.prototype.toString.call(i[s])?t[s]=l.extend(!0,t[s],i[s]):t[s]=i[s])};i<s;i++){o(arguments[i])}return t},l.opts={animation:!0,lang:"en",path:"",template:"",images:!1,autosave:!1,upload:!1,edit:!0,code:!0,baseColors:["#ffffff","#111113"],doctype:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">',buttons:["bold","italic","strikethrough","link"],frame:{width:"100%",border:"none","background-color":"#fff","margin-left":"auto","margin-right":"auto"},align:"left",width:"600px",widthPreview:{desktop:600,mobile:320},styles:{text:{"font-family":"Helvetica, Arial, sans-serif","font-size":"14px","line-height":"21px",color:"#111113"},link:{color:"#2c76ee"},"button-link":{"font-size":"18px"},button:{"font-size":"15px","font-weight":"bold",color:"#ffffff","background-color":"#2c76ee"}},textLineHeight:1.5,headingsLineHeight:1.2,headings:{h1:"36px",h2:"24px",h3:"18px"},card:{duplicate:!0,settings:!0,spacer:!1},block:{add:!0,sort:!0,duplicate:!0,settings:!0,trash:!0},blocks:{Headings:{"heading-1":'<re-block><re-heading type="h1">Heading</re-heading></re-block>',"heading-2":'<re-block><re-heading type="h2">Heading</re-heading></re-block>',"heading-3":'<re-block><re-heading type="h3">Heading</re-heading></re-block>'},Text:{"text-1":"<re-block><re-text>Type some text ...</re-text></re-block>","text-2":'<re-block><re-grid><re-row><re-column width="300px" padding="0 0 20px 0"><re-text>Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="300px" padding="0 0 20px 0"><re-text>Type some text ...</re-text></re-column></re-row></re-grid></re-block>',"text-3":'<re-block><re-grid><re-row><re-column width="200px" padding="0 0 20px 0"><re-text>Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-text>Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-text>Type some text ...</re-text></re-column></re-row></re-grid></re-block>'},Images:{"image-1":'<re-block><re-image src="{{--image-placeholder--}}"></re-image></re-block>',"image-2":'<re-block><re-grid><re-row><re-column width="300px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="300px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column></re-row></re-grid></re-block>',"image-3":'<re-block><re-grid><re-row><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column></re-row></re-grid></re-block>',"image-1-text-right":'<re-block><re-grid><re-row><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="400px" padding="0 0 20px 0"><re-text>Type some text ...</re-text></re-column></re-row></re-grid></re-block>',"image-2-text":'<re-block><re-grid><re-row><re-column width="300px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-text padding="4px 0 0 0">Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="300px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-text padding="4px 0 0 0">Type some text ...</re-text></re-column></re-row></re-grid></re-block>',"image-3-text":'<re-block><re-grid><re-row><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-text padding="4px 0 0 0">Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-text padding="4px 0 0 0">Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-text padding="4px 0 0 0">Type some text ...</re-text></re-column></re-row></re-grid></re-block>',"image-1-text-left":'<re-block><re-grid><re-row><re-column width="400px" padding="0 0 20px 0"><re-text>Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column></re-row></re-grid></re-block>',"image-2-heading-text":'<re-block><re-grid><re-row><re-column width="300px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-heading type="h2" padding="4px 0">Heading</re-heading><re-text>Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="300px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-heading type="h2" padding="4px 0">Heading</re-heading><re-text>Type some text ...</re-text></re-column></re-row></re-grid></re-block>',"image-3-heading-text":'<re-block><re-grid><re-row><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-heading type="h3" padding="4px 0">Heading</re-heading><re-text>Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-heading type="h3" padding="4px 0">Heading</re-heading><re-text>Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image><re-heading type="h3" padding="4px 0">Heading</re-heading><re-text>Type some text ...</re-text></re-column></re-row></re-grid></re-block>',"image-1-heading-text-left":'<re-block><re-grid><re-row><re-column width="400px" padding="0 0 20px 0"><re-heading type="h2" padding="4px 0">Heading</re-heading><re-text>Type some text ...</re-text></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column></re-row></re-grid></re-block>',"image-1-heading-text-right":'<re-block><re-grid><re-row><re-column width="200px" padding="0 0 20px 0"><re-image src="{{--image-placeholder--}}"></re-image></re-column><re-column-spacer width="16px"></re-column-spacer><re-column width="400px" padding="0 0 20px 0"><re-heading type="h2" padding="4px 0">Heading</re-heading><re-text>Type some text ...</re-text></re-column></re-row></re-grid></re-block>'},Button:{button:'<re-block><re-button href="http://example.com/">Button</re-button></re-block>',"button-link":'<re-block><re-button-link href="http://example.com/">Link</re-button-link></re-block>',"button-app":'<re-block><re-button-app width="130px" src="{{--app-store-placeholder--}}" href="http://example.com/">App Store</re-button-app><re-inline-spacer padding="0 4px"></re-inline-spacer><re-button-app width="130px" src="{{--google-play-placeholder--}}" href="http://example.com/">Google Play</re-button-app></re-block>'}},stylePairs:{"background-color":"bgcolor","text-align":"align"},icons:{settings:'<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M11,15 C8.790861,15 7,13.209139 7,11 C7,8.790861 8.790861,7 11,7 C13.209139,7 15,8.790861 15,11 C15,13.209139 13.209139,15 11,15 Z M11,13 C12.1045695,13 13,12.1045695 13,11 C13,9.8954305 12.1045695,9 11,9 C9.8954305,9 9,9.8954305 9,11 C9,12.1045695 9.8954305,13 11,13 Z"></path><path d="M19.91,12 L20,12 C20.5522847,12 21,11.5522847 21,11 C21,10.4477153 20.5522847,10 20,10 L19.8260117,9.99999205 C18.7697973,9.9957795 17.8169395,9.36474787 17.4008602,8.39393144 C17.3646445,8.30943133 17.3403365,8.22053528 17.3284579,8.12978593 C16.997162,7.1847178 17.2270428,6.12462982 17.9428932,5.39289322 L18.0032867,5.3325 C18.1910637,5.14493174 18.2965733,4.89040925 18.2965733,4.625 C18.2965733,4.35959075 18.1910637,4.10506826 18.0025,3.91671334 C17.8149317,3.7289363 17.5604092,3.62342669 17.295,3.62342669 C17.0295908,3.62342669 16.7750683,3.7289363 16.5871068,3.91710678 L16.519265,3.98486258 C15.7448438,4.74238657 14.5873187,4.9522675 13.6060686,4.51913983 C12.6352521,4.10306046 12.0042205,3.1502027 12,2.09 L12,2 C12,1.44771525 11.5522847,1 11,1 C10.4477153,1 10,1.44771525 10,2 L9.99999205,2.17398831 C9.9957795,3.2302027 9.36474787,4.18306046 8.39393144,4.59913983 C8.30943133,4.63535548 8.22053528,4.65966354 8.12978593,4.67154209 C7.1847178,5.00283804 6.12462982,4.77295717 5.39289322,4.05710678 L5.3325,3.99671334 C5.14493174,3.8089363 4.89040925,3.70342669 4.625,3.70342669 C4.35959075,3.70342669 4.10506826,3.8089363 3.91671334,3.9975 C3.7289363,4.18506826 3.62342669,4.43959075 3.62342669,4.705 C3.62342669,4.97040925 3.7289363,5.22493174 3.91710678,5.41289322 L3.98486258,5.48073504 C4.74238657,6.25515616 4.9522675,7.41268129 4.5385361,8.34518109 C4.16293446,9.36642969 3.2012163,10.0542811 2.09,10.08 L2,10.08 C1.44771525,10.08 1,10.5277153 1,11.08 C1,11.6322847 1.44771525,12.08 2,12.08 L2.17398831,12.080008 C3.2302027,12.0842205 4.18306046,12.7152521 4.59486258,13.6762347 C5.0322675,14.6673187 4.82238657,15.8248438 4.05710678,16.6071068 L3.99671334,16.6675 C3.8089363,16.8550683 3.70342669,17.1095908 3.70342669,17.375 C3.70342669,17.6404092 3.8089363,17.8949317 3.9975,18.0832867 C4.18506826,18.2710637 4.43959075,18.3765733 4.705,18.3765733 C4.97040925,18.3765733 5.22493174,18.2710637 5.41289322,18.0828932 L5.48073504,18.0151374 C6.25515616,17.2576134 7.41268129,17.0477325 8.34518109,17.4614639 C9.36642969,17.8370655 10.0542811,18.7987837 10.08,19.91 L10.08,20 C10.08,20.5522847 10.5277153,21 11.08,21 C11.6322847,21 12.08,20.5522847 12.08,20 L12.080008,19.8260117 C12.0842205,18.7697973 12.7152521,17.8169395 13.6762347,17.4051374 C14.6673187,16.9677325 15.8248438,17.1776134 16.6071068,17.9428932 L16.6675,18.0032867 C16.8550683,18.1910637 17.1095908,18.2965733 17.375,18.2965733 C17.6404092,18.2965733 17.8949317,18.1910637 18.0832867,18.0025 C18.2710637,17.8149317 18.3765733,17.5604092 18.3765733,17.295 C18.3765733,17.0295908 18.2710637,16.7750683 18.0828932,16.5871068 L18.0151374,16.519265 C17.2588636,15.7461219 17.0484268,14.5911384 17.482977,13.6011431 C17.9001657,12.6331176 18.8515919,12.0042134 19.91,12 Z M17.4851374,13.5962347 L17.4808602,13.6060686 C17.4815645,13.6044252 17.4822703,13.6027829 17.4829777,13.6011415 C17.4836954,13.5995065 17.4844155,13.5978703 17.4851374,13.5962347 Z M19.2987985,7.71517468 C19.4176633,7.89040605 19.6163373,7.99914118 19.83,8 L20,8 C21.6568542,8 23,9.34314575 23,11 C23,12.6568542 21.6568542,14 20,14 L19.9139883,13.999992 C19.6549169,14.0010253 19.421197,14.1558067 19.3191398,14.3939314 C19.2075746,14.6468614 19.2590548,14.9307827 19.4371068,15.1128932 L19.4967133,15.1725 C20.0600445,15.7352048 20.3765733,16.4987723 20.3765733,17.295 C20.3765733,18.0912277 20.0600445,18.8547952 19.4975,19.4167133 C18.9347952,19.9800445 18.1712277,20.2965733 17.375,20.2965733 C16.5787723,20.2965733 15.8152048,19.9800445 15.2528932,19.4171068 L15.200735,19.3648626 C15.0107827,19.1790548 14.7268614,19.1275746 14.4739314,19.2391398 C14.2358067,19.341197 14.0810253,19.5749169 14.08,19.83 L14.08,20 C14.08,21.6568542 12.7368542,23 11.08,23 C9.42314575,23 8.08,21.6568542 8.08,20 C8.07403212,19.6665579 7.90531385,19.4306648 7.59623466,19.3148626 C7.35313857,19.2075746 7.06921731,19.2590548 6.88710678,19.4371068 L6.8275,19.4967133 C6.26479523,20.0600445 5.50122774,20.3765733 4.705,20.3765733 C3.90877226,20.3765733 3.14520477,20.0600445 2.58328666,19.4975 C2.01995553,18.9347952 1.70342669,18.1712277 1.70342669,17.375 C1.70342669,16.5787723 2.01995553,15.8152048 2.58289322,15.2528932 L2.63513742,15.200735 C2.82094519,15.0107827 2.87242541,14.7268614 2.76086017,14.4739314 C2.65880297,14.2358067 2.42508314,14.0810253 2.17,14.08 L2,14.08 C0.343145751,14.08 -1,12.7368542 -1,11.08 C-1,9.42314575 0.343145751,8.08 2,8.08 C2.33344206,8.07403212 2.56933519,7.90531385 2.68513742,7.59623466 C2.79242541,7.35313857 2.74094519,7.06921731 2.56289322,6.88710678 L2.50328666,6.8275 C1.93995553,6.26479523 1.62342669,5.50122774 1.62342669,4.705 C1.62342669,3.90877226 1.93995553,3.14520477 2.5025,2.58328666 C3.06520477,2.01995553 3.82877226,1.70342669 4.625,1.70342669 C5.42122774,1.70342669 6.18479523,2.01995553 6.74710678,2.58289322 L6.79926496,2.63513742 C6.98921731,2.82094519 7.27313857,2.87242541 7.51623466,2.76513742 C7.58030647,2.73685997 7.64699387,2.71546911 7.71517468,2.70120146 C7.89040605,2.58233675 7.99914118,2.3836627 8,2.17 L8,2 C8,0.343145751 9.34314575,-1 11,-1 C12.6568542,-1 14,0.343145751 14,2 L13.999992,2.08601169 C14.0010253,2.34508314 14.1558067,2.57880297 14.4037653,2.68513742 C14.6468614,2.79242541 14.9307827,2.74094519 15.1128932,2.56289322 L15.1725,2.50328666 C15.7352048,1.93995553 16.4987723,1.62342669 17.295,1.62342669 C18.0912277,1.62342669 18.8547952,1.93995553 19.4167133,2.5025 C19.9800445,3.06520477 20.2965733,3.82877226 20.2965733,4.625 C20.2965733,5.42122774 19.9800445,6.18479523 19.4171068,6.74710678 L19.3648626,6.79926496 C19.1790548,6.98921731 19.1275746,7.27313857 19.2348626,7.51623466 C19.26314,7.58030647 19.2845309,7.64699387 19.2987985,7.71517468 Z"></path></g></svg>',duplicate:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m11 10c-.5522847 0-1 .4477153-1 1v9c0 .5522847.4477153 1 1 1h9c.5522847 0 1-.4477153 1-1v-9c0-.5522847-.4477153-1-1-1zm0-2h9c1.6568542 0 3 1.34314575 3 3v9c0 1.6568542-1.3431458 3-3 3h-9c-1.65685425 0-3-1.3431458-3-3v-9c0-1.65685425 1.34314575-3 3-3z"/><path d="m5 14c.55228475 0 1 .4477153 1 1s-.44771525 1-1 1h-1c-1.65685425 0-3-1.3431458-3-3v-9c0-1.65685425 1.34314575-3 3-3h9c1.6568542 0 3 1.34314575 3 3v1c0 .55228475-.4477153 1-1 1s-1-.44771525-1-1v-1c0-.55228475-.4477153-1-1-1h-9c-.55228475 0-1 .44771525-1 1v9c0 .5522847.44771525 1 1 1z"/></svg>',trash:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m3 7c-.55228475 0-1-.44771525-1-1s.44771525-1 1-1h18c.5522847 0 1 .44771525 1 1s-.4477153 1-1 1z"/><path d="m18 6c0-.55228475.4477153-1 1-1s1 .44771525 1 1v14c0 1.6568542-1.3431458 3-3 3h-10c-1.65685425 0-3-1.3431458-3-3v-14c0-.55228475.44771525-1 1-1s1 .44771525 1 1v14c0 .5522847.44771525 1 1 1h10c.5522847 0 1-.4477153 1-1zm-9 0c0 .55228475-.44771525 1-1 1s-1-.44771525-1-1v-2c0-1.65685425 1.34314575-3 3-3h4c1.6568542 0 3 1.34314575 3 3v2c0 .55228475-.4477153 1-1 1s-1-.44771525-1-1v-2c0-.55228475-.4477153-1-1-1h-4c-.55228475 0-1 .44771525-1 1z"/><path d="m9 11c0-.5522847.44771525-1 1-1 .5522847 0 1 .4477153 1 1v6c0 .5522847-.4477153 1-1 1-.55228475 0-1-.4477153-1-1z"/><path d="m13 11c0-.5522847.4477153-1 1-1s1 .4477153 1 1v6c0 .5522847-.4477153 1-1 1s-1-.4477153-1-1z"/></svg>',add:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><rect height="2" rx="1" width="16" x="4" y="11"/><rect height="16" rx="1" width="2" x="11" y="4"/></svg>',"add-circle":'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m12 23c-6.07513225 0-11-4.9248678-11-11 0-6.07513225 4.92486775-11 11-11 6.0751322 0 11 4.92486775 11 11 0 6.0751322-4.9248678 11-11 11zm0-2c4.9705627 0 9-4.0294373 9-9 0-4.97056275-4.0294373-9-9-9-4.97056275 0-9 4.02943725-9 9 0 4.9705627 4.02943725 9 9 9z" fill-rule="nonzero"/><rect height="2" rx="1" width="10" x="7" y="11"/><rect height="10" rx="1" width="2" x="11" y="7"/></svg>',sort:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g transform="translate(4 9)"><path d="m0 7c-.55228475 0-1-.44771525-1-1s.44771525-1 1-1h16c.5522847 0 1 .44771525 1 1s-.4477153 1-1 1z"/><path d="m0 1c-.55228475 0-1-.44771525-1-1s.44771525-1 1-1h16c.5522847 0 1 .44771525 1 1s-.4477153 1-1 1z"/></g></svg>',desktop:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m4 4c-.55228475 0-1 .44771525-1 1v10c0 .5522847.44771525 1 1 1h16c.5522847 0 1-.4477153 1-1v-10c0-.55228475-.4477153-1-1-1zm0-2h16c1.6568542 0 3 1.34314575 3 3v10c0 1.6568542-1.3431458 3-3 3h-16c-1.65685425 0-3-1.3431458-3-3v-10c0-1.65685425 1.34314575-3 3-3z"/><path d="m8 22c-.55228475 0-1-.4477153-1-1s.44771525-1 1-1h8c.5522847 0 1 .4477153 1 1s-.4477153 1-1 1z"/><path d="m11 17c0-.5522847.4477153-1 1-1s1 .4477153 1 1v4c0 .5522847-.4477153 1-1 1s-1-.4477153-1-1z"/></svg>',mobile:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m7 3c-.55228475 0-1 .44771525-1 1v16c0 .5522847.44771525 1 1 1h10c.5522847 0 1-.4477153 1-1v-16c0-.55228475-.4477153-1-1-1zm0-2h10c1.6568542 0 3 1.34314575 3 3v16c0 1.6568542-1.3431458 3-3 3h-10c-1.65685425 0-3-1.3431458-3-3v-16c0-1.65685425 1.34314575-3 3-3z"/></svg>',code:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m9.38360299 19.1825515c.3959379-.4117133.38300721-1.0665238-.02870615-1.4627203l-5.94837874-5.7195054 5.94837874-5.71976406c.41171336-.39593791.42464405-1.05074835.02870615-1.46246171-.39593791-.41223059-1.05074836-.42490267-1.46272033-.02870614l-6.72396188 6.46534801c-.20275332.1947362-.31731928.4642119-.31731928.7455839 0 .2813719.11456596.550589.31731928.7455839l6.72396188 6.465348c.2006844.192926.45903971.2888717.71687778.2888717.27154462 0 .54283062-.1065489.74584255-.3175779m5.97837791.3175779c-.2715446 0-.542572-.1062903-.7458425-.3175779-.3959379-.4117133-.3830072-1.0665238.0287061-1.4627203l5.9486374-5.7195054-5.9486374-5.71976406c-.4117133-.39593791-.424644-1.05074835-.0287061-1.46246171.3959379-.41197197 1.0507484-.42464405 1.4627203-.02870614l6.7239619 6.46534801c.2027533.1947362.3175779.4642119.3175779.7455839 0 .2813719-.1148246.550589-.3175779.7455839l-6.7239619 6.465348c-.2006844.192926-.4587811.2888717-.7168778.2888717"/></svg>',"align-left":'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g><path d="m17 9c.5522847 0 1 .44771525 1 1 0 .5522847-.4477153 1-1 1h-14c-.55228475 0-1-.4477153-1-1 0-.55228475.44771525-1 1-1z"/><path d="m21 5c.5522847 0 1 .44771525 1 1s-.4477153 1-1 1h-18c-.55228475 0-1-.44771525-1-1s.44771525-1 1-1z"/><path d="m21 13c.5522847 0 1 .4477153 1 1s-.4477153 1-1 1h-18c-.55228475 0-1-.4477153-1-1s.44771525-1 1-1z"/><path d="m17 17c.5522847 0 1 .4477153 1 1s-.4477153 1-1 1h-14c-.55228475 0-1-.4477153-1-1s.44771525-1 1-1z"/></g></svg>',"align-center":'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g><path d="m19 9c.5522847 0 1 .44771525 1 1 0 .5522847-.4477153 1-1 1h-14c-.55228475 0-1-.4477153-1-1 0-.55228475.44771525-1 1-1z"/><path d="m21 5c.5522847 0 1 .44771525 1 1s-.4477153 1-1 1h-18c-.55228475 0-1-.44771525-1-1s.44771525-1 1-1z"/><path d="m21 13c.5522847 0 1 .4477153 1 1s-.4477153 1-1 1h-18c-.55228475 0-1-.4477153-1-1s.44771525-1 1-1z"/><path d="m19 17c.5522847 0 1 .4477153 1 1s-.4477153 1-1 1h-14c-.55228475 0-1-.4477153-1-1s.44771525-1 1-1z"/></g></svg>',"align-right":'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g><path d="m21 9c.5522847 0 1 .44771525 1 1 0 .5522847-.4477153 1-1 1h-14c-.55228475 0-1-.4477153-1-1 0-.55228475.44771525-1 1-1z"/><path d="m21 5c.5522847 0 1 .44771525 1 1s-.4477153 1-1 1h-18c-.55228475 0-1-.44771525-1-1s.44771525-1 1-1z"/><path d="m21 13c.5522847 0 1 .4477153 1 1s-.4477153 1-1 1h-18c-.55228475 0-1-.4477153-1-1s.44771525-1 1-1z"/><path d="m21 17c.5522847 0 1 .4477153 1 1s-.4477153 1-1 1h-14c-.55228475 0-1-.4477153-1-1s.44771525-1 1-1z"/></g></svg>',bold:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m16.7562177 20.376934c1.2847165-1.0078564 2.0155706-2.6063262 1.9572789-4.2808152.1730396-2.4065537-1.2998837-4.6088352-3.5266287-5.2729354 1.4129538-.6368181 2.3420534-2.07098361 2.3804744-3.67451947.0507787-1.43215308-.566842-2.80134657-1.6575155-3.67451946-1.3408531-1.01031914-2.96608-1.52738221-4.6198837-1.46980779-1.0227223 0-2.7860367.061242-5.2899431.18372598v19.80565984h5.7131386c1.8084469.0732866 3.5869854-.4969049 5.0430791-1.6167885zm-5.5544403-15.35949136c1.9514012 0 2.9271018.75940069 2.9271018 2.27820207 0 1.71477574-1.0932549 2.57216362-3.2797647 2.57216362-.5642606 0-1.10501032 0-1.6222492 0v-4.7768753h1.9220127zm-.2292309 7.47764706c1.1496112-.1096164 2.3031888.1603411 3.2973979.7716491.6657628.6140384 1.0125276 1.5207133.9345566 2.4435555.0812758 1.0125992-.32098 2.0020082-1.0756218 2.645654-.9817099.6113234-2.1222928.8875493-3.2621315.7900217-.4231955 0-.97570066-.030621-1.65751555-.091863v-6.5222721h1.76331435z"/></svg>',italic:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m11.3974256 22 3.0571199-20h-2.3974256l-3.0571199 20z"/></svg>',strikethrough:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m22.6680253 12.8715919h-6.8976547c-.6595712-.6970197-1.451428-1.2556163-2.3293128-1.6431586l-1.6070452-.7583809c-.7136989-.3330752-1.3913599-.73846168-2.02234899-1.20979803-.33268887-.27329076-.59830362-.61920765-.77643757-1.01117451-.18734794-.42645793-.2797646-.88854121-.27085032-1.35425158-.02514903-.73531491.25603429-1.44808194.77643757-1.96817896.58181431-.50761484 1.34261211-.76121413 2.11263251-.70421083.6759446.00979838 1.3461689.1255644 1.9862356.34307707.5688898.16716047 1.1102935.41657117 1.6070452.7403242l.7764376-2.29319934c-1.3319093-.79102089-2.8828513-1.13286117-4.4238885-.97506114-1.447841-.05542153-2.86015069.45637876-3.93635793 1.42647833-1.01225244.92343103-1.57250864 2.2416809-1.53481846 3.61133754-.02805887 1.07174232.24735785 2.1295929.79449426 3.05158025.70165561.9522033 1.65989472 1.6849744 2.76267322 2.1126324l1.33619491.6319841h-10.0214617v1.8056688h12.7660782l.1083401.1263968c.3419709.5401789.5235585 1.1663432.523644 1.8056688.0190883.8196445-.3245027 1.6059394-.9389478 2.1487458-.6942518.586318-1.5840242.8893564-2.4918229.8486643-.6770281-.0144061-1.34746633-.136304-1.98623563-.3611337-.64468282-.2064294-1.25371556-.5109458-1.80566877-.9028344l-.95700445 2.4376528c1.31403692.8360174 2.84912407 1.2575372 4.40583185 1.2097981 1.6983919.0905108 3.3703452-.4496587 4.6947388-1.5167618 1.1355774-.8933917 1.800629-2.2567474 1.8056687-3.7016209-.0338912-.7149124-.1738551-1.4208171-.4153038-2.0945758h5.958707z"/></svg>',link:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="m16.4734033 18.5273359c-1.1386485-.0058243-2.2586655-.2894967-3.2628079-.826388v-2.0232258h1.3535666c.6026623.2614328 1.2523198.3971821 1.9092413.3989459 2.014488.2012841 3.822255-1.2398728 4.0749478-3.2485598-.2456446-2.0144274-2.0555589-3.46362448-4.0749478-3.26280787-.6579135.00625782-1.3076121.14686424-1.9092413.41319401h-1.3535666v-2.02322584c1.0041424-.5368913 2.1241594-.82056374 3.2628079-.82638802 3.3676387-.21181985 6.275324 2.33320015 6.5113676 5.69922772-.2360436 3.3660276-3.1437289 5.9110476-6.5113676 5.6992277zm-8.82915057.1163108c1.16188616-.0059431 2.30476071-.2954048 3.32939577-.8432531v-2.0645161h-1.38119037c-.61496153.2667681-1.27787735.4052879-1.9482054.4070876-2.05559999.205392-3.90026019-1.2651763-4.15811002-3.3148569.25065776-2.0555381 2.09750908-3.53431069 4.15811002-3.32939579.67134024.00638554 1.33429804.14986148 1.9482054.42162655h1.38119037v-2.06451617c-1.02463506-.54784826-2.16750961-.83730994-3.32939577-.84325308-3.43636604-.2161427-6.40339191 2.38081648-6.64425273 5.81553849.24086082 3.434722 3.20788669 6.0316812 6.64425273 5.8155385zm.6792549-7.2403454h6.51136767v2.8496138h-6.51136767z"/></svg>'},templateStyles:"#outlook a{padding:0}.ExternalClass{width:100%}.ExternalClass,.ExternalClass p,.ExternalClass span,.ExternalClass font,.ExternalClass td,.ExternalClass div{line-height:100%}body,table,td,a{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}table,td{mso-table-lspace:0;mso-table-rspace:0}img{-ms-interpolation-mode:bicubic}img{border:0;outline:none;text-decoration:none}a img{border:none}td img{vertical-align:top}table,table td{border-collapse:collapse}body{margin:0;padding:0;width:100% !important}.mobile-spacer{width:0;display:none}@media all and (max-width:639px){.container{width:100% !important;max-width:600px !important}.mobile{width:auto !important;max-width:100% !important;display:block !important}.mobile-center{text-align:center !important}.mobile-right{text-align:right !important}.mobile-left{text-align:left!important;}.mobile-hidden{max-height:0;display:none !important;mso-hide:all;overflow:hidden}.mobile-spacer{width:auto !important;display:table !important}.mobile-image img {height: auto !important; max-width: 600px !important; width: 100% !important}}",templateMsoStyles:'\x3c!--[if mso]><style type="text/css">body, table, td, a { font-family: Arial, Helvetica, sans-serif !important; }</style><![endif]--\x3e',templateTags:["head","title","font","style","body","container","main","header","card","block","spacer","divider","grid","row","column","column-spacer","footer","text","heading","button","button-link","button-app","image","link","social-link","menu-link","mobile-spacer","preheader","inline-spacer"],templateNested:["head","body","container","main","header","card","block","grid","row","column","footer"]},l.lang.en={};var d=function(t,e,i){this.modules={},this.services=[],this.queueStart={service:{},module:{}},this.queueStop={service:{},module:{}},this.started=!1,this.stopped=!1,this.uuid=i,this.rootOpts=e,this.rootElement=t,this.$win=l.dom(window),this.$doc=l.dom(document),this.$body=l.dom("body"),this.coreServices=["options","lang"],this.bindableServices=["opts","lang","$win","$doc","$body"],this.opts=l.create("service.options",this,t,e),this.lang=l.create("service.lang",this),this.appcallback=new d.Callback(this),this.appstarter=new d.Starter(this),this.appbuilder=new d.Builder(this),this.appbroadcast=new d.Broadcast(this),this.appapi=new d.Api(this),this.build(),this.start()};d.prototype={build:function(){this.appbuilder.build()},start:function(){this.stopped=!1,this.broadcast("start",this),this.appstarter.start(),this.broadcast("started",this),this.started=!0},stop:function(){this.started=!1,this.stopped=!0,this.broadcast("stop",this),this.appstarter.stop(),this.broadcast("stopped",this)},starter:function(t,e){var i="service"!==t._type?"module":t._type;this.queueStart[i][e]=t._name},stopper:function(t,e){var i="service"!==t._type?"module":t._type;this.queueStop[i][e]=t._name},isStarted:function(){return this.started},isStopped:function(){return this.stopped},broadcast:function(t,e){this.appbroadcast.trigger(t,e,[].slice.call(arguments,2))},on:function(t,e){this.appcallback.add(t,e)},off:function(t,e){this.appcallback.remove(t,e)},getHtml:function(t){return this.frame.getHtml(t)},getSource:function(t){return this.frame.getSource(t)},getTemplate:function(t){return this.frame.getTemplate(t)},setTemplate:function(t){this.frame.setTemplate(t)},api:function(t){return this.appapi.trigger(t,[].slice.call(arguments,1))}},d.Api=function(t){this.app=t,this.modules=t.modules},d.Api.prototype={trigger:function(t,e){var i=t.split("."),s=3===i.length,o=1===i.length,a="on"===i[0]||"off"===i[0],n=i[0],r=i[1];if(o?(n=!1,r=i[0]):s&&(r=i[2],i[1]),o){if("function"==typeof this.app[r])return this._call(this.app,r,e)}else{if(a)return"on"===n?this.app.on(n,e[0]):this.app.off(n,e[0]||void 0);if(this._isInstanceExists(this.app,n))return this._call(this.app[n],r,e);if(this._isInstanceExists(this.modules,n))return this._call(this.modules[n],r,e)}},_isInstanceExists:function(t,e){return void 0!==t[e]},_call:function(t,e,i){if("function"==typeof t[e])return t[e].apply(t,i)}},d.Broadcast=function(t){this.app=t,this.modules=t.modules,this.callback=t.appcallback},d.Broadcast.prototype={trigger:function(t,e,i){for(var s in Array.isArray(t)&&(e._id=t[0],t=t[1]),i.unshift(e),this.modules){var o=this.modules[s];this._call(o,t,i)}this.callback.trigger(t,i)},_call:function(t,e,i){if(void 0!==t.onmessage){var s=e.split("."),o=t.onmessage[s[0]];1===s.length&&"function"==typeof o?o.apply(t,i):2===s.length&&void 0!==o&&"function"==typeof o[s[1]]&&o[s[1]].apply(t,i)}}},d.Builder=function(t){this.app=t,this.opts=t.opts},d.Builder.prototype={build:function(){this._buildServices(),this._buildModules(),this._buildPlugins()},_buildServices:function(){var t=[];for(var e in l.services)-1===this.app.coreServices.indexOf(e)&&(this.app[e]=l.create("service."+e,this.app),this.app.bindableServices.push(e),t.push(e));for(var i=0;i<t.length;i++)for(var s=t[i],o=0;o<this.app.bindableServices.length;o++){var a=this.app.bindableServices[o];s!==a&&(this.app[s][a]=this.app[a])}this.app.services=t},_buildModules:function(){for(var t in l.modules)this.app.modules[t]=l.create("module."+t,this.app)},_buildPlugins:function(){for(var t=this.opts.plugins?this.opts.plugins:[],e=0;e<t.length;e++){var i=t[e];void 0!==l.plugins[i]&&(this.app.modules[i]=l.create("plugin."+i,this.app))}}},d.Starter=function(t){this.app=t,this.queue={start:t.queueStart,stop:t.queueStop},this.priority={start:{service:[],module:[]},stop:{service:[],module:[]}}},d.Starter.prototype={start:function(){this._stopStart("service","start"),this._stopStart("module","start")},stop:function(){this._stopStart("service","stop"),this._stopStart("module","stop")},_stopStart:function(t,e){var i=this.queue[e][t];for(var s in i){var o=i[s],a="service"===t?this.app[o]:this.app.modules[o];this._call(a,e),this.priority[e][t].push(o)}var n="service"===t?this.app.services:this.app.modules;for(var s in n){o="service"===t?n[s]:s;if(-1===this.priority[e][t].indexOf(o)&&"string"==typeof o){a="service"===t?this.app[o]:n[o];this._call(a,e)}}},_call:function(t,e,i){if("function"==typeof t[e])return t[e].apply(t,i)}},d.Callback=function(t){this.app=t,this.opts=t.opts,this.callbacks={},this._build()},d.Callback.prototype={stop:function(){this.callbacks={}},add:function(t,e){void 0===this.callbacks[t]&&(this.callbacks[t]=[]),this.callbacks[t].push(e)},remove:function(t,e){if(void 0===e)delete this.callbacks[t];else{for(var i=0;i<this.callbacks[t].length;i++)this.callbacks[t].splice(i,1);0===this.callbacks[t].length&&delete this.callbacks[t]}},trigger:function(t,e){if(void 0!==this.callbacks[t])for(var i=0;i<this.callbacks[t].length;i++)this.callbacks[t][i].apply(this.app,e)},_build:function(){if(this.opts.callbacks)for(var t in this.opts.callbacks)if("function"==typeof this.opts.callbacks[t])void 0===this.callbacks[t]&&(this.callbacks[t]=[]),this.callbacks[t].push(this.opts.callbacks[t]);else for(var e in this.opts.callbacks[t])void 0===this.callbacks[t+"."+e]&&(this.callbacks[t+"."+e]=[]),this.callbacks[t+"."+e].push(this.opts.callbacks[t][e])}},l.add("extend","dom",l.Dom.prototype),l.add("extend","template",{init:function(t,e,i){this.app=t,this.opts=t.opts,this.utils=t.utils,this.template=t.template,this.props=e,this.randomId=this.utils.getRandomId(),this.build(),this.dataset("instance",this),this.attr("data-element-id",this.randomId),this.attr("data-element-type",i)},setContainer:function(t){this.$container=t},getContainer:function(){return this.$container},getSource:function(){return this.props.$source},setAttr:function(t,e,i){var s=t.get().tagName.toLowerCase();switch(e){case"background-color":t.css("background-color",i),"a"!==s&&t.attr("bgcolor",i);break;case"background-image":t.css("background-image","url("+i+")"),t.attr("background",i);case"height":t.attr("height",this._normalizeWidthAttr(i)),t.css("height",i);break;case"color":case"border":case"font-size":case"font-weight":case"font-family":case"line-height":case"background-size":case"text-decoration":case"text-transform":case"border-radius":case"padding":t.css(e,i);break;case"align":t.css("text-align",i),"td"===s&&t.attr("align",i);break;case"valign":t.css("vertical-align",i),"td"===s&&t.attr("valign",i);break;case"class":t.addClass(i);break;case"direction":case"src":case"href":case"alt":t.attr(e,i);break;case"width":t.attr(e,this._normalizeWidthAttr(i)),t.css(e,i)}return t},injectAttr:function(t,e,i){var s=this._getAttrs(e);for(var o in s)i&&-1!==i.indexOf(o)||(t=this.setAttr(t,o,s[o]));return t},createTable:function(t){var e=l.dom("<table>");return e.attr({cellpadding:0,cellspacing:0,border:0}),t&&t.attrs&&e.attr(t.attrs),t&&t.css&&e.css(t.css),e},createImage:function(){return l.dom("<img>").attr("border",0).css({margin:0,padding:0,"max-width":"100%",border:"none"})},_setBackgroundColor:function(t,e,i){"none"===t?(e.css("background-color",""),e.removeAttr("bgcolor"),i.removeAttr("background-color")):(e.css("background-color",t),e.attr("bgcolor",t),i.attr("background-color",t))},_getTextLineHeight:function(t){return t.attr("font-size")&&!t.attr("line-height")?parseInt(t.attr("font-size"))*this.opts.textLineHeight+"px":this.opts.styles.text["line-height"]},_getHeadingLineHeight:function(t){return Math.round(parseInt(t)*this.opts.headingsLineHeight)},_parseLinks:function(t){var e=l.dom("<div>");e.html(t),e.find("re-link").each(function(t){var e=l.dom(t),i=l.create("template.link",this.app,{$source:e});e.replaceWith(i)}.bind(this));t=e.html();return e.remove(),t},_normalizeWidthAttr:function(t){return-1!==t.search("%")?t:parseInt(t)},_getAttrs:function(t){for(var e={},i=0,s=t.get().attributes,o=s.length;i<o;i++)e[s[i].nodeName]=s[i].nodeValue;return e}}),l.add("service","element",{init:function(t){this.app=t,this.$element=l.dom(this.app.rootElement)},start:function(){this._build()},getElement:function(){return this.$element},_build:function(){this.$element.addClass("re-editor")}}),l.add("service","animate",{init:function(t){this.animationOpt=t.opts.animation},start:function(t,e,i,s){var o={duration:!1,iterate:!1,delay:!1,timing:!1,prefix:"remail-"};return o="function"==typeof i?o:l.extend(o,i),new l.AnimatePlay(t,e,o,s="function"==typeof i?i:s,this.animationOpt)},stop:function(t){this.$el=l.dom(t),this.$el.removeClass("remail-animated");var e=this.$el.attr("remail-animate-effect");this.$el.removeClass(e),this.$el.removeAttr("remail-animate-effect");var i=this.$el.attr("remail-animate-hide");i&&this.$el.addClass(i).removeAttr("remail-animate-hide"),this.$el.off("animationend webkitAnimationEnd")}}),(l.AnimatePlay=function(t,e,i,s,o){return this.hidableEffects=["fadeOut","flipOut","slideUp","zoomOut","slideOutUp","slideOutRight","slideOutLeft"],this.prefixes=["","-webkit-"],this.$el=l.dom(t),this.$body=l.dom("body"),this.callback=s,this.animation=o?e:this.buildAnimationOff(e),this.defaults=i,"slideUp"===this.animation&&this.$el.height(this.$el.height()),this.isInanimate()?this.inanimate():this.animate()}).prototype={buildAnimationOff:function(t){return this.isHidable(t)?"hide":"show"},buildHideClass:function(){return"remail-animate-hide"},isInanimate:function(){return"show"===this.animation||"hide"===this.animation},isAnimated:function(){return this.$el.hasClass("remail-animated")},isHidable:function(t){return-1!==this.hidableEffects.indexOf(t)},inanimate:function(){var t;return this.defaults.timing="linear","show"===this.animation?(t=this.buildHideClass(),this.$el.attr("remail-animate-hide",t),this.$el.removeClass(t)):(t=this.$el.attr("remail-animate-hide"),this.$el.addClass(t).removeAttr("remail-animate-hide")),"function"==typeof this.callback&&this.callback(this),this},animate:function(){var t=this.defaults.delay?this.defaults.delay:0;return setTimeout(function(){if(this.$body.addClass("no-scroll-x"),this.$el.addClass("remail-animated"),!this.$el.attr("remail-animate-hide")){var t=this.buildHideClass();this.$el.attr("remail-animate-hide",t),this.$el.removeClass(t)}this.$el.addClass(this.defaults.prefix+this.animation),this.$el.attr("remail-animate-effect",this.defaults.prefix+this.animation),this.set(this.defaults.duration+"s",this.defaults.iterate,this.defaults.timing),this.complete()}.bind(this),1e3*t),this},set:function(t,e,i){for(var s=this.prefixes.length;s--;)!1===t&&""!==t||this.$el.css(this.prefixes[s]+"animation-duration",t),!1===e&&""!==e||this.$el.css(this.prefixes[s]+"animation-iteration-count",e),!1===i&&""!==i||this.$el.css(this.prefixes[s]+"animation-timing-function",i)},clean:function(){this.$body.removeClass("no-scroll-x"),this.$el.removeClass("remail-animated"),this.$el.removeClass(this.defaults.prefix+this.animation),this.$el.removeAttr("remail-animate-effect"),this.set("","","")},complete:function(){this.$el.one("animationend webkitAnimationEnd",function(){if(this.$el.hasClass(this.defaults.prefix+this.animation)&&this.clean(),this.isHidable(this.animation)){var t=this.$el.attr("remail-animate-hide");this.$el.addClass(t)}this.$el.removeAttr("remail-animate-hide"),"slideUp"===this.animation&&this.$el.height(""),"function"==typeof this.callback&&this.callback(this.$el)}.bind(this))}},l.add("service","options",{init:function(t,e,i){var s=l.dom(e),o=l.extend({},l.opts,e?s.data():{},l.options);return o=l.extend(!0,o,i)}}),l.add("service","lang",{init:function(t){this.app=t,this.opts=t.opts;var e=this.opts.lang?this.opts.lang:"en";this.vars=this.build(e)},build:function(t){return t=void 0===l.lang[t]?"en":t,void 0!==l.lang[t]?l.lang[t]:[]},rebuild:function(t){this.opts.lang=t,this.vars=this.build(t)},extend:function(t){this.vars=l.extend(this.vars,t)},parse:function(t){if(void 0===t)return"";var e=t.match(/## (.*?) ##/g);if(e)for(var i=0;i<e.length;i++){var s=e[i].replace(/^##\s/g,"").replace(/\s##$/g,"");t=t.replace(e[i],this.get(s))}return t},get:function(t){return void 0!==this.vars[t]?this.vars[t]:""}}),l.add("service","utils",{init:function(t){this.app=t},ucfirst:function(t){return t.charAt(0).toUpperCase()+t.substr(1)},getRandomId:function(t){for(var e="",i="abcdefghijklmnopqrstuvwxyz0123456789",s=0;s<12;s++)e+=i.charAt(Math.floor(Math.random()*i.length));return e+(void 0===t?"":t)},scrollTo:function(t,e,i,s){var o=l.dom(t),a=o.scrollTop(),n=e-a,r=0,h=function(){var t,e,l,d=(t=r+=20,e=a,l=n,(t/=i/2)<1?l/2*t*t+e:-l/2*(--t*(t-2)-1)+e);o.scrollTop(d),r<i?setTimeout(h,20):"function"==typeof s&&s()};h()},replaceRgbToHex:function(t){return t.replace(/rgb\((.*?)\)/g,function(t,e){return"#"+e.split(",").map(function(t){return 1===(t=parseInt(t).toString(16)).length?"0"+t:t}).join("")})},getHexValue:function(t){return void 0===t||null==t?"#000000":t=this.isRgb(t)?this.rgb2hex(t):"#"+t.replace("#","")},isRgb:function(t){return 0===t.search(/^rgb/i)},rgb2hex:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},hex2long:function(t){return-1!==t.search(/^#/)&&4===t.length&&(t="#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),t},hex2short:function(t){var e=t.replace("#","");return e.charAt(0)==e.charAt(1)&&e.charAt(2)==e.charAt(3)&&e.charAt(4)==e.charAt(5)&&(t="#"+e.charAt(0)+e.charAt(2)+e.charAt(4)),t}}),l.add("service","frame",{init:function(t){this.app=t,this.cssfile="css/revolvapp-frame.min.css?"+new Date},start:function(){this._build()},load:function(t){var e=this.getDoc(),i=setInterval(function(){var s=e.get();if("complete"==s.readyState||"interactive"==s.readyState)return t(),this.loadImages(),void clearInterval(i)}.bind(this),100)},loadImages:function(){var t=this.getDoc().find("img"),e=t.length,i=this;t.each(function(t){if(i.opts.images){var s=t.src.split("/"),o=s[s.length-1];t.src=i.opts.images+o}t.onload=function(){e--}});var s=setInterval(function(){if(0===e)return this.app.broadcast("adjustHeight",this),void clearInterval(s)}.bind(this),50)},buildCss:function(){var t=this.getHead(),e=l.dom("<link>");e.attr({id:"re-css",rel:"stylesheet",href:this.opts.path+this.cssfile}),t.append(e)},buildUndo:function(){this.getDoc().on("keydown.revolvapp",function(t){var e=t.which,i=t.ctrlKey||t.metaKey;l.dom(t.target).hasClass("re-editable")||i&&90===e&&this.template.revertSnapshot()}.bind(this))},buildClick:function(){this.getBody().on("click.revolvapp.control",this._handleBodyClick.bind(this))},adjustHeight:function(t){setTimeout(function(){var e=this.getBody().height()+(t||0);e=e<140?140:e;var i=this.getBody().find("#re-dropdown");if(0!==i.length){var s=i.height(),o=i.offset();e=e<s?o.top+s+20:e}this.$frame.height(e)}.bind(this),100)},setCode:function(t){var e=this.getDoc().get();e.open(),e.write(t),e.close()},setTemplate:function(t){this.settedCode=t,this.setSource(t),this.setCode(this.template.getInitialCode()),this.load(this._load.bind(this))},setSource:function(t){this.frameSource=t},getElement:function(){return this.$frame},getDoc:function(){return l.dom(this.$frame.get().contentWindow.document)},getWin:function(){return this.$frame.get().contentWindow},getHead:function(){return l.dom(this.$frame.get().contentWindow.document).find("head")},getBody:function(){return l.dom(this.$frame.get().contentWindow.document).find("body")},getCards:function(){return this.getBody().find(".re-card")},getControls:function(t,e){var i=this.getBody().find(".re-controls-"+t);return void 0===e?i:i.filter(function(t){return l.dom(t).attr("data-control-id")===e})},getSource:function(t){var e=this.frameSource;return e=this.utils.replaceRgbToHex(e),!0===t?this.tidy.get(e):e},getTemplate:function(t){var e=this.template.getSource();return!0===t?this.tidy.get(e):e},getHtml:function(t){var e=this.getDoc().clone(),i=e.get();this._removeUtils(e),this._removeDataAttrs(e),this._removeEditable(e),this._removeClasses(e);var s=i.documentElement.outerHTML;return!0===t&&(s=this.tidy.get(s,"html")),s=(s=s.replace(/url\(&quot;(.*?)&quot;\)/gi,"url('$1')")).replace(/&quot;(.*?)&quot;/gi,"'$1'"),s=this.utils.replaceRgbToHex(s),this._getDoctype(i)+"\n"+s},_build:function(){this.$frame=l.dom("<iframe>"),this.element.getElement().append(this.$frame)},_handleBodyClick:function(t){var e=l.dom(t.target),i=1===e.closest(".re-card").length,s=1===e.closest("#re-dropdown").length,o=1===e.closest("#re-color-picker").length,a=1===e.closest("#re-slide").length;i||s||o||a||(this.control.hide("block"),this.control.show("card"),this.getBody().find(".re-block").removeClass("is-re-active"))},_removeUtils:function(t){t.find("#re-css, #re-add-block-icon, #re-editor-toolbar, #re-editor-toolbar-helper, #re-color-picker, #re-slide, #re-dropdown, .re-controls").remove(),t.find("body").find(".re-card, .re-block").removeClass("is-re-active is-re-readonly")},_removeClasses:function(t){var e=["re-editable","re-card","re-block"];t.find("body").find("."+e.join(", .")).removeClass(e.join(" "))},_removeEditable:function(t){t.find("body").find(".re-editable").removeAttr("contenteditable")},_removeDataAttrs:function(t){t.find("[ondragstart]").removeAttr("ondragstart"),t.find("[data-element-id]").removeAttr("data-element-id data-element-type")},_getDoctype:function(t){var e=t.doctype;return"<!DOCTYPE "+e.name+(e.publicId?' PUBLIC "'+e.publicId+'"':"")+(!e.publicId&&e.systemId?" SYSTEM":"")+(e.systemId?' "'+e.systemId+'"':"")+">"},_load:function(){this.template.build(this.settedCode),setTimeout(function(){this.buildCss(),this.buildUndo(),this.buildClick(),this.app.broadcast("rebuilt",this),this.app.broadcast("images.observe",this),this.app.broadcast("adjustHeight",this)}.bind(this),100)}}),l.add("service","panel",{init:function(t){this.app=t,this.activeClass="is-re-editor-panel-active",this.disableClass="is-re-editor-panel-disable"},build:function(){this.$panel=l.dom("<div>"),this.$panel.attr("id","re-editor-panel"),this.$panel.addClass("re-editor-panel"),this.$panelLeft=l.dom("<div>"),this.$panelLeft.addClass("re-editor-panel-left"),this.$panelRight=l.dom("<div>"),this.$panelRight.addClass("re-editor-panel-right"),this.$panel.append(this.$panelLeft),this.$panel.append(this.$panelRight),this.element.getElement().prepend(this.$panel)},add:function(t,e){var i="left"===e?this.$panelLeft:this.$panelRight,s=this._createButton(t);"left"===e?i.append(s):i.prepend(s)},remove:function(t){this._findButton(t).remove()},addActive:function(t){this.$panel.find("span").removeClass(this.activeClass),this._findButton(t).addClass(this.activeClass)},disableButtons:function(t){this.$panel.find("span").each(function(e){var i=l.dom(e),s=i.attr("data-name");-1===t.indexOf(s)&&i.addClass(this.disableClass)}.bind(this))},enableButtons:function(){this.$panel.find("span").removeClass(this.disableClass)},_createButton:function(t){var e=this,i=l.dom("<span>");return i.attr("data-name",t.name),i.html(t.icon),i.on("click",function(i){i.preventDefault();var s=l.dom(i.target).closest("span"),o=s.attr("data-name");s.hasClass(e.disableClass)||t.callback(o)}),i},_findButton:function(t){return this.$panel.find("[data-name="+t+"]")}}),l.add("service","control",{init:function(t){this.app=t,this.icons={card:["settings","duplicate","trash"],block:["settings","trash","duplicate","add"]}},build:function(t,e,i){this.$el=e,this.controlType=t,this.cardFirst=i,this._buildContainer(),this._buildIcons(),this._appendToBody(),this._setPosition()},remove:function(t,e){this.frame.getControls(t,e).remove()},show:function(t,e){var i=this.frame.getControls(t,e);if("card"===t){var s=this;i.each(function(t){var e=l.dom(t),i=e.attr("data-control-id");0!==s.frame.getBody().find('[data-element-id="'+i+'"]').find(".re-block").length&&e.show()})}else i.show()},hide:function(t,e){this.frame.getControls(t,e).hide()},_buildContainer:function(){this.$control=l.dom("<div>"),this.$control.addClass("re-controls re-controls-"+this.controlType),this.$control.attr("data-control-id",this.$el.attr("data-element-id")),"card"===this.controlType&&(this.$control.on("mouseover",function(t){var e=l.dom(t.target).closest(".re-controls").attr("data-control-id");this.frame.getBody().find('[data-element-id="'+e+'"]').addClass("is-re-hover")}.bind(this)),this.$control.on("mouseout",function(t){var e=l.dom(t.target).closest(".re-controls").attr("data-control-id");this.frame.getBody().find('[data-element-id="'+e+'"]').removeClass("is-re-hover")}.bind(this)))},_buildIcons:function(){for(var t=this.icons[this.controlType],e=this.opts[this.controlType],i=0;i<t.length;i++)void 0!==e[t[i]]&&!1===e[t[i]]||"card"===this.controlType&&this.cardFirst&&"trash"===t[i]||this._buildIcon(t[i])},_buildIcon:function(t){var e=l.dom("<span>");e.addClass("re-icon-control re-icon-control-"+t),e.html(this.opts.icons[t]),e.attr("data-icon-name",t),e.attr("data-control-type",this.controlType),e.attr("data-id",this.$el.attr("data-element-id")),e.on("click",this._handleClick.bind(this)),this.$control.append(e)},_handleClick:function(t){t.preventDefault(),t.stopPropagation();var e=l.dom(t.target).closest(".re-icon-control"),i=e.attr("data-control-type"),s=e.attr("data-icon-name"),o=e.attr("data-id"),a=this.frame.getBody().find('[data-element-id="'+o+'"]');this.app.broadcast(i+"."+s,this,t,a,e)},_appendToBody:function(){this.frame.getBody().append(this.$control)},_setPosition:function(){var t=this.frame.getBody().width(),e="card"===this.controlType?this.$el:this.$el.closest(".re-card"),i=e.innerWidth(),s=(this.$el.innerHeight(),e.offset()),o=this.$el.offset(),a=t<680?-40:4,n=o.top+"px",r=s.left+i+a+"px";this.$control.css({top:n,left:r})}}),l.add("service","dropdown",{init:function(t){this.app=t},build:function(t,e){var i=this.frame.getBody(),s=i.find("#re-dropdown");if(0!==s.length)return this.close(s);this.$dropdown=l.dom("<div>"),this.$dropdown.attr("id","re-dropdown"),this.$dropdown.addClass("re-dropdown"),this.$dropdown.html(""),this.$dropdown.append(e);var o=t.offset(),a=t.width();this.$dropdown.css({top:o.top+"px",left:o.left+a-270+2+"px"}),i.append(this.$dropdown),i.on("click.revolvapp.dropdown",this._close.bind(this)),i.on("keydown.revolvapp.dropdown",this._close.bind(this)),this.app.broadcast("adjustHeight",this)},close:function(t){var e=this.frame.getBody();(t=t||e.find("#re-dropdown")).remove(),e.off(".revolvapp.dropdown"),this.frame.getCards().removeClass("is-re-active"),this.app.broadcast("adjustHeight",this)},_close:function(t){if(t)if("keydown"===t.type)27===t.which&&this.close();else{var e=l.dom(t.target),i=1===e.closest("#re-dropdown").length,s=1===e.closest("#re-color-picker").length;i||s||this.close()}}}),l.add("service","slide",{init:function(t){this.app=t},build:function(t,e){if(this.$el=t,this.$html=e,this.$el.hasClass("slide-in"))return this._close();this._closeAll(),this._build(),this._open()},close:function(){this._closeAll(),this.app.broadcast("adjustHeight",this)},_build:function(){this.$slide=l.dom("<div>"),this.$slide.attr("id","re-slide"),this.$slide.addClass("re-slide"),this.$slide.addClass("remail-animate-hide"),this.$slide.append(this.$html),this.$el.after(this.$slide)},_open:function(){this.animate.start(this.$slide,"slideDown",this._opened.bind(this))},_opened:function(){this.$el.addClass("slide-in"),this.app.broadcast("adjustHeight",this);var t=this.frame.getBody();t.on("click.revolvapp.slide",this._close.bind(this)),t.on("keydown.revolvapp.slide",this._close.bind(this))},_close:function(t){var e=this.$slide||this.frame.getBody().find("#re-slide");if(t)if("keydown"===t.type)27===t.which&&this.animate.start(e,"slideUp",this._closed.bind(this));else{var i=l.dom(t.target),s=1===i.closest("#re-add-block-icon").length,o=1===i.closest("#re-slide").length,a=1===i.closest("#re-color-picker").length;s||o||a||this.animate.start(e,"slideUp",this._closed.bind(this))}else this.animate.start(e,"slideUp",this._closed.bind(this))},_closed:function(t){t.remove(),this.$el.removeClass("slide-in"),this.app.broadcast("adjustHeight",this),this.app.broadcast("setControlPosition",this),this.frame.getBody().off(".revolvapp.slide")},_closeAll:function(){var t=this.frame.getBody();t.find("#re-slide").remove(),t.find(".slide-in").removeClass("slide-in")}}),l.add("service","tidy",{init:function(t){this.app=t},get:function(t,e){t=(t=(t=t.replace(/\t/g,"    ")).replace(/<!\-\-\s+</g,"\x3c!-- <")).replace(/\n/g,"");var i=["re-style","style","meta","link"],s=[],o=["re-container","re-title","re-social-link","re-font","re-link","re-divider","re-menu-link","re-spacer","re-text","re-heading","re-image-link","re-image","re-column-spacer","re-inline-spacer","re-body","re-head","re-header","re-footer","re-main","re-card","re-block","re-grid","re-row","re-column","re-preheader","re-button","re-button-link","re-button-app"];"html"===e&&(o=["p","title","head","body","table","thead","tbody","tfoot","tr","td","th"]),this.lineBefore=new RegExp("^<(/?"+i.join("|/?")+"|"+s.join("|")+")[ >]"),this.lineAfter=new RegExp("^<(br|/?"+i.join("|/?")+"|/"+s.join("|/")+")[ >]"),this.newLevel=new RegExp("^</?("+o.join("|")+")[ >]");var a=0,n=t.length,r=0,l=null,h=null,d="",c="",p="";for(this.cleanlevel=0;a<n;a++){if(r=a,-1==t.substr(a).indexOf("<"))return c+=t.substr(a),this.finish(c,e);for(;r<n&&"<"!=t.charAt(r);)r++;for(a!=r&&((p=t.substr(a,r-a)).match(/^\s{2,}$/g)||("\n"==c.charAt(c.length-1)?c+=this.getTabs():"\n"==p.charAt(0)&&(c+="\n"+this.getTabs(),p=p.replace(/^\s+/,"")),c+=p),p.match(/\n/)&&(c+="\n"+this.getTabs())),l=r;r<n&&">"!=t.charAt(r);)r++;var u;if(a=r,"!--"==(d=t.substr(l,r-l)).substr(1,3)){if(!d.match(/--$/)){for(;"--\x3e"!=t.substr(r,3);)r++;r+=2,d=t.substr(l,r-l),a=r}"\n"!=c.charAt(c.length-1)&&(c+="\n"),c+=this.getTabs(),c+=d+">\n"}else"!"==d[1]?c=this.placeTag(d+">",c):"?"==d[1]?c+=d+">\n":(u=d.match(/^<(script|style|pre)/i))?(u[1]=u[1].toLowerCase(),d=this.cleanTag(d),c=this.placeTag(d,c),(h=String(t.substr(a+1)).toLowerCase().indexOf("</"+u[1]))&&(p=t.substr(a+1,h),a+=h,c+=p)):(d=this.cleanTag(d),c=this.placeTag(d,c))}return this.finish(c,e)},getTabs:function(){for(var t="",e=0;e<this.cleanlevel;e++)t+="    ";return t},finish:function(t,e){if(t=(t=(t=(t=t.replace(/\n\s*\n/g,"\n")).replace(/^[\s\n]*/,"")).replace(/[\s\n]*$/,"")).replace(/<script(.*?)>\n<\/script>/gi,"<script$1><\/script>"),this.cleanlevel=0,"html"!==e){var i=new RegExp(">\\n\\s+</("+["re-font","re-social-link","re-mobile-spacer","re-inline-spacer","re-column-spacer","re-image","re-divider","re-spacer","re-button-app"].join("|")+")>","g");t=t.replace(i,"></$1>")}return t},cleanTag:function(t){var e,i="",s="";for((t=(t=(t=t.replace(/\n/g," ")).replace(/\s{2,}/g," ")).replace(/^\s+|\s+$/g," ")).match(/\/$/)&&(s="/",t=t.replace(/\/+$/,""));e=/\s*([^= ]+)(?:=((['"']).*?\3|[^ ]+))?/.exec(t);)e[2]?i+=e[1].toLowerCase()+"="+e[2]:e[1]&&(i+=e[1].toLowerCase()),i+=" ",t=t.substr(e[0].length);return i.replace(/\s*$/,"")+s+">"},placeTag:function(t,e){var i=t.match(this.newLevel);return(t.match(this.lineBefore)||i)&&(e=e.replace(/\s*$/,""),e+="\n"),i&&"/"==t.charAt(1)&&this.cleanlevel--,"\n"==e.charAt(e.length-1)&&(e+=this.getTabs()),i&&"/"!=t.charAt(1)&&this.cleanlevel++,e+=t,(t.match(this.lineAfter)||t.match(this.newLevel))&&(e=e.replace(/ *$/,""),e+="\n"),e}}),l.add("service","editable",{init:function(t){this.app=t,this.$doc=t.$doc},build:function(t){l.create("editable.class",this.app,t)}}),l.add("class","editable.class",{init:function(t,e){this.app=t,this.opts=t.opts,this.$el=l.dom(e),this.frame=t.frame,this.template=t.template,this.build()},build:function(){this.win=this.frame.getWin(),this.doc=this.frame.getDoc().get(),this.$el.attr("contenteditable",!0),this.$el.on("paste",this._paste.bind(this)),this.$el.on("keydown",this._keydown.bind(this)),this.$el.on("keyup",this._keyup.bind(this))},_keydown:function(t){var e=t.which,i=t.ctrlKey||t.metaKey;i&&66===e?(t.preventDefault(),this.doc.execCommand("bold",!1,null)):i&&73===e&&(t.preventDefault(),this.doc.execCommand("italic",!1,null))},_keyup:function(t){this._setSource(this.$el.html()),this.app.broadcast("changed",this)},_paste:function(t){t.preventDefault();var e=t.clipboardData.getData("text/html")||t.clipboardData.getData("text/plain");e=this._stripTags(e,"<a><b><strong><i><em><del>"),e=this._stripStyle(e),e=this._buildLinks(e),this._insertHtml(e),this._setSource(e)},_insertHtml:function(t){if(this.win.getSelection){var e=this.win.getSelection();if(e.getRangeAt&&e.rangeCount){var i=e.getRangeAt(0);i.deleteContents();var s=document.createElement("div");s.innerHTML=t;for(var o,a,n=document.createDocumentFragment();o=s.firstChild;)a=n.appendChild(o);i.insertNode(n),a&&((i=i.cloneRange()).setStartAfter(a),i.collapse(!0),e.removeAllRanges(),e.addRange(i))}}},_setSource:function(t){var e=this.$el.closest("[data-element-id]").dataget("instance").getSource(),i=l.dom("<div>");i.html(t),i.find("a").each(function(t){var e=l.dom(t),i=l.dom("<re-link>");i.html(e.html()),i.attr({href:e.attr("href"),color:t.style.color,"font-size":t.style.fontSize}),e.replaceWith(i)}),e.html(i.html())},_buildLinks:function(t){var e={"text-decoration":"underline","font-family":this.opts.styles.text["font-family"],"font-size":this.opts.styles.text["font-size"],"font-weight":"normal","line-height":this.opts.styles.text["line-height"],color:this.opts.styles.link.color},i=l.dom("<div>");return i.html(t),i.find("a").attr("target","_blank").css(e),i.html()},_stripStyle:function(t){var e=l.dom("<div>");return e.html(t),e.find("[style]").removeAttr("style"),e.html()},_stripTags:function(t,e){e=(((e||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return t.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(t,i){return e.indexOf("<"+i.toLowerCase()+">")>-1?t:""})}}),l.add("service","upload",{init:function(t){this.app=t},push:function(t,e,i,s){t=l.dom(t);this.uploadClass=l.create("upload.class",this.app,t,e,i,s),this.$upload=this.uploadClass.buildImage()},build:function(t,e,i,s){t=l.dom(t);this.uploadClass=l.create("upload.class",this.app,t,e,i,s),this.$upload="INPUT"===t.get().tagName?this.uploadClass.buildInput():this.uploadClass.buildBox()},set:function(t,e){this.$upload.html(""),this.$upload.append(t),!1!==e&&this.uploadClass.buildRemove()}}),l.add("class","upload.class",{init:function(t,e,i,s,o){this.app=t,this.opts=t.opts,this.$el=e,this.width=o,this.completeCallback=i,this.removeCallback=s},buildInput:function(){return this.box=!1,this.prefix="",this.$uploadbox=l.dom('<div class="re-upload-item" />'),this.width&&this.$uploadbox.width(this.width),this.$el.hide(),this.$el.after(this.$uploadbox),this._buildEvents(),this.$uploadbox},buildBox:function(){return this.box=!0,this.prefix="box-",this.$uploadbox=this.$el,this.$uploadbox.attr("ondragstart","return false;"),this.$uploadbox.off(".remail-upload"),this.$uploadbox.on("drop.remail-upload",this._onDropBox.bind(this)),this.$uploadbox.on("dragover.remail-upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.remail-upload",this._onDragLeave.bind(this)),this.$uploadbox},buildImage:function(){return this.image=!0,this.prefix="box-",this.$uploadbox=this.$el,this.$uploadbox.attr("ondragstart","return false;"),this.$uploadbox.off(".remail-upload"),this.$uploadbox.on("drop.remail-upload",this._onDropBox.bind(this)),this.$uploadbox.on("dragover.remail-upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.remail-upload",this._onDragLeave.bind(this)),this.$uploadbox},buildRemove:function(){var t=l.dom("<span>");t.addClass("re-upload-remove"),t.on("click",function(t){t.preventDefault(),"function"==typeof this.removeCallback&&this.removeCallback(),this.$uploadbox.html(""),this.app.broadcast("upload.remove")}.bind(this)),this.$uploadbox.append(t)},_buildEvents:function(){this.$el.off(".remail-upload"),this.$uploadbox.off(".remail-upload"),this.$el.on("change.remail-upload",this._onChange.bind(this)),this.$uploadbox.on("click.remail-upload",this._onClick.bind(this)),this.$uploadbox.on("drop.remail-upload",this._onDrop.bind(this)),this.$uploadbox.on("dragover.remail-upload",this._onDragOver.bind(this)),this.$uploadbox.on("dragleave.remail-upload",this._onDragLeave.bind(this))},_onClick:function(t){t.preventDefault(),l.dom(t.target).hasClass("re-upload-remove")||this.$el.click()},_onChange:function(t){this._send(t,this.$el.get().files)},_onDrop:function(t){t.preventDefault(),this._clear(),this._send(t)},_onDragOver:function(t){return t.preventDefault(),this._setStatusHover(),!1},_onDragLeave:function(t){return t.preventDefault(),this._removeStatusHover(),!1},_onDropBox:function(t){t.preventDefault(),this._clear(),this._send(t)},_send:function(t,e){t=t.originalEvent||t,e=e||t.dataTransfer.files;var i=new FormData;i.append("file",e[0]),!1!==this.app.broadcast("upload.start",t,i,e)&&this._sendData(i,e,t)},_sendData:function(t,e,i){l.ajax.post({url:this.opts.upload,data:t,before:function(t){return this.app.broadcast("upload.beforeSend",t)}.bind(this),success:function(t){this._complete(t,i)}.bind(this)})},_complete:function(t,e){if(this._clear(),t&&t.error)this.app.broadcast("upload.error",t);else{if(t.$el=this.$el,"function"==typeof this.completeCallback&&(this.completeCallback(t),!this.image)){var i=l.dom("<img>");i.attr("src",t.url),this.$uploadbox.html(""),this.$uploadbox.append(i),!1!==this.removeCallback&&this.buildRemove()}this.app.broadcast("upload.complete",t),setTimeout(this._clear.bind(this),500)}},_removeStatusHover:function(){this.$uploadbox.removeClass("is-re-upload-"+this.prefix+"hover")},_setStatusHover:function(){this.$uploadbox.addClass("is-re-upload-"+this.prefix+"hover")},_clear:function(){for(var t=["hover"],e=0;e<t.length;e++)this.$uploadbox.removeClass("is-re-upload-"+this.prefix+t[e]);this.$uploadbox.removeAttr("ondragstart")}}),l.add("service","template",{init:function(t){this.app=t,this.snapshot=!1},build:function(t){this._createTemplate(),this._createSource(t),this._render()},getInitialCode:function(){return this.opts.doctype+"\n<html></html>"},getCode:function(){return this.opts.doctype+"\n"+this.$template.html()},getSource:function(){return this.$source.html()},getSourceBody:function(){return this.$source.find("re-body")},revertSnapshot:function(){!1!==this.snapshot&&(this.frame.setTemplate(this.snapshot),this.snapshot=this.$source.html())},createSnapshot:function(){this.snapshot=this.$source.html()},create:function(t,e){return void 0===e&&(e={}),void 0===e.$source&&(e.$source=l.dom("<re-"+t+">")),l.create("template."+t,this.app,e,t)},parse:function(t){var e=l.dom("<div>");return this._parse(t,e,!0),e.children().first()},_render:function(){var t=this.$source.children().first(),e=t.children(),i=this.create("html",{$source:t},"html");this.$template.replaceWith(i),this._parse(e,i),this._buildStyleDefault(i)},_parse:function(t,e){var i=this;t.each(function(t){var s,o=l.dom(t),a=t.tagName.toLowerCase().replace("re-","");-1!==i.opts.templateTags.indexOf(a)?(s=i.create(a,{$source:o}),-1!==i.opts.templateNested.indexOf(a)&&i._parse(o.children(),s.getContainer())):s=o,e.append(s)})},_buildStyleDefault:function(t){var e=l.dom("<style>");e.attr("type","text/css"),e.html(this.opts.templateStyles);var i=t.find("head"),s=i.find("style");0!==s.length?s.first().before(e):i.append(e),i.append(this.opts.templateMsoStyles)},_createTemplate:function(){this.$template=this.frame.getDoc().find("html")},_createSource:function(t){this.$source=l.dom("<div>"),this.$source.html(t)}}),l.add("class","template.html",{extends:["dom","template"],build:function(){this.parse("<html>"),this.attr({xmlns:"http://www.w3.org/1999/xhtml"}),this.setContainer(this)}}),l.add("class","template.head",{extends:["dom","template"],build:function(){this.parse("<head>"),this.append('<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />'),this.append('<meta name="viewport" content="width=device-width, initial-scale=1.0"/>'),this.setContainer(this)}}),l.add("class","template.title",{extends:["dom","template"],build:function(){var t=this.getSource();this.parse("<title>"),this.html(t.html()),this.setContainer(this)}}),l.add("class","template.font",{extends:["dom","template"],build:function(){var t={href:this.getSource().attr("href"),rel:"stylesheet"};this.parse("<link>"),this.attr(t),this.setContainer(this)}}),l.add("class","template.style",{extends:["dom","template"],build:function(){var t=this.getSource();this.parse("<style>"),this.attr({type:"text/css"}),this.html(t.html()),this.setContainer(this)}}),l.add("class","template.body",{extends:["dom","template"],build:function(){var t=this.getSource(),e={"font-family":this.opts.styles.text["font-family"],margin:0,padding:0};this.parse("<body>"),this.css(e),this.injectAttr(this,t),this.setContainer(this)}}),l.add("class","template.container",{extends:["dom","template"],build:function(){var t=this.getSource(),e=t.attr("width")?t.attr("width"):this.opts.width,i={attrs:{width:this._normalizeWidthAttr(e)},css:{width:e}};this.parse(this.createTable(i)),this.addClass("container");var s=l.dom("<tr>"),o=l.dom("<td>");o.attr({align:"center",valign:"top"}),o.css({"vertical-align":"top"}),this.injectAttr(o,t,["width"]),s.append(o),this.append(s),this.setContainer(o)}}),l.add("class","template.header",{extends:["dom","template"],build:function(){var t=this.getSource(),e=t.attr("width")?t.attr("width"):this.opts.width,i=t.attr("align")?t.attr("align"):this.opts.align,s={attrs:{width:this._normalizeWidthAttr(e)},css:{width:e}};this.parse(this.createTable(s)),this.addClass("container"),this.addClass("header");var o=l.dom("<tr>"),a=l.dom("<td>");a.attr({valign:"top",align:i}),a.css({"vertical-align":"top"}),this.injectAttr(a,t,["width"]),o.append(a),this.append(o),this.setContainer(a)}}),l.add("class","template.main",{extends:["dom","template"],build:function(){var t=this.getSource();this.parse(this.createTable({attrs:{width:"100%"},css:{width:"100%"}})),this.addClass("main");var e=l.dom("<tr>"),i=l.dom("<td>");i.attr({align:"center",valign:"top"}),i.css({"vertical-align":"top"}),this.injectAttr(i,t),e.append(i),this.append(e),this.setContainer(i)}}),l.add("class","template.footer",{extends:["dom","template"],build:function(){var t=this.getSource(),e=t.attr("width")?t.attr("width"):this.opts.width,i=t.attr("align")?t.attr("align"):this.opts.align,s={attrs:{width:this._normalizeWidthAttr(e)},css:{width:e}};this.parse(this.createTable(s)),this.addClass("container"),this.addClass("footer");var o=l.dom("<tr>"),a=l.dom("<td>");a.attr({valign:"top",align:i}),a.css({"vertical-align":"top"}),this.injectAttr(a,t,["width"]),o.append(a),this.append(o),this.setContainer(a)}}),l.add("class","template.card",{extends:["dom","template"],tools:{Text:{"text-color":{tool:"color",label:"Color",prop:"color",getter:"getToolTextColor",setter:"setToolTextColor"},"text-size":{tool:"size",label:"Size",prop:"font-size",getter:"getToolTextSize",setter:"setToolTextSize"}},Link:{"link-color":{tool:"color",label:"Color",prop:"color",getter:"getToolLinkColor",setter:"setToolLinkColor"}},Padding:{padding:{tool:"size",label:"Size",prop:"padding",getter:"getPadding",setter:"setPadding"}},Border:{"border-size":{tool:"size",label:"Width",prop:"border-width",getter:"getBorderSize",setter:"setBorderSize"},"border-color":{tool:"color",label:"Color",prop:"border-color",getter:"getBorderColor",setter:"setBorderColor"},"border-radius":{tool:"size",label:"Radius",prop:"border-radius",getter:"getBorderRadius",setter:"setBorderRadius"}},Background:{"card-backcolor":{tool:"color",label:"Color",prop:"background-color",getter:"getToolBackgroundColor",setter:"setToolBackgroundColor"},"card-backimage":{tool:"upload-back",label:"Image",prop:"background-image",getter:"getToolBackgroundImage",setter:"setToolBackgroundImage"}}},build:function(){this.$source=this.getSource();var t=this.$source.attr("width")?this.$source.attr("width"):this.opts.width,e={attrs:{width:this._normalizeWidthAttr(t)},css:{width:t}};this.parse(this.createTable(e)),this.addClass("container"),this.addClass("card"),this.addClass("re-card");var i=l.dom("<tr>");this.$cardCell=l.dom("<td>"),this.$cardCell.attr({valign:"top"}),this.$cardCell.css({"vertical-align":"top"}),this.injectAttr(this.$cardCell,this.$source,["width"]),i.append(this.$cardCell),this.append(i),this.setContainer(this.$cardCell)},getToolTextColor:function(){return this.$cardCell.find('[data-element-type="text"], [data-element-type="heading"]').each(function(t){l.dom(t).dataget("instance").saveColor()}.bind(this)),this.opts.styles.text.color},getToolTextSize:function(){return this.opts.styles.text["font-size"]},getToolLinkColor:function(){return this.$cardCell.find('[data-element-type="link"]').each(function(t){l.dom(t).dataget("instance").saveColor()}.bind(this)),this.opts.styles.link.color},getToolBackgroundColor:function(){var t=this.$source.attr("background-color");return null==t?"none":this.utils.getHexValue(t)},getToolBackgroundImage:function(){return{image:this.$source.attr("background-image"),size:this.$source.attr("background-size")}},getBorderSize:function(){return this.$cardCell.css("border-width")},getBorderColor:function(){return this.utils.getHexValue(this.$cardCell.css("border-color"))},getBorderRadius:function(){return this.$cardCell.css("border-radius")},getPadding:function(){return this.$cardCell.css("padding")},setToolTextColor:function(t,e){this.opts.styles.text.color=t,this.$cardCell.find('[data-element-type="text"], [data-element-type="heading"]').each(function(i){l.dom(i).dataget("instance").setColor(t,e)}.bind(this))},setToolTextSize:function(t){var e=parseInt(t)*this.opts.textLineHeight+"px";this.opts.styles.text["font-size"]=t,this.opts.styles.text["line-height"]=e,this.$cardCell.find('[data-element-type="text"], [data-element-type="link"]').each(function(i){l.dom(i).dataget("instance").setSize(t,e)}.bind(this))},setToolLinkColor:function(t,e){this.opts.styles.link.color=t,this.$cardCell.find('[data-element-type="link"]').each(function(i){l.dom(i).dataget("instance").setColor(t,e)}.bind(this))},setToolBackgroundColor:function(t){this._setBackgroundColor(t,this.$cardCell,this.$source)},setToolBackgroundImage:function(t,e){return!1===t&&!1===e?(this.removeAttr("background"),this.css({"background-image":"","background-position":"","background-size":""}),this.$source.removeAttr("background-image"),void this.$source.removeAttr("background-size")):!1===t?(this.css("background-size",e),void this.$source.attr("background-size",e)):(this.attr("background",t),this.css({"background-image":"url("+t+")","background-position":"top center","background-size":e}),void this.$source.attr({"background-image":t,"background-size":e}))},setBorderSize:function(t){var e=this.$cardCell.css("border-color"),i=t+" solid "+this.utils.getHexValue(e);this.$cardCell.css("border",i),this.$source.attr("border",i)},setBorderColor:function(t){var e=this.$cardCell.css("border-width"),i=(e=""===e?"1px":e)+" solid "+t;this.$cardCell.css("border",i),this.$source.attr("border",i)},setBorderRadius:function(t){this.$cardCell.css("border-radius",t),this.$source.attr("border-radius",t)},setPadding:function(t){this.$cardCell.css("padding",t),this.$source.attr("padding",t)}}),l.add("class","template.block",{extends:["dom","template"],tools:{Block:{"block-align":{tool:"align",label:"Align",prop:"text-align",getter:"getBlockAlign",setter:"setBlockAlign"},"block-padding":{tool:"size",label:"Padding",prop:"padding",getter:"getBlockPadding",setter:"setBlockPadding"},"block-background":{tool:"color",label:"Background",prop:"background-color",getter:"getBackgroundColor",setter:"setBackgroundColor"},"border-size":{tool:"size",label:"Border Width",prop:"border-width",getter:"getBorderSize",setter:"setBorderSize"},"border-color":{tool:"color",label:"Border Color",prop:"border-color",getter:"getBorderColor",setter:"setBorderColor"},"border-radius":{tool:"size",label:"Border Radius",prop:"border-radius",getter:"getBorderRadius",setter:"setBorderRadius"},"column-space":{tool:"size",label:"Column Space",prop:"width",getter:"getColumnSpacerWidth",setter:"setColumnSpacerWidth"}}},build:function(){this.$source=this.getSource();var t=this.$source.attr("align")?this.$source.attr("align"):this.opts.align;this.parse(this.createTable({attrs:{width:"100%"},css:{width:"100%"}})),this.addClass("block"),this.addClass("re-block");var e=l.dom("<tr>");this.$blockCell=l.dom("<td>"),this.$blockCell.attr({align:t,valign:"top"}),this.$blockCell.css({"vertical-align":"top"}),this.$source.attr("border-radius")&&this.css("border-collapse","separate"),this.$source.attr("mc-edit")&&this.$blockCell.attr("mc:edit",this.randomId),this.injectAttr(this.$blockCell,this.$source,["align"]),e.append(this.$blockCell),this.append(e),this.setContainer(this.$blockCell)},getBlockAlign:function(){return this.$source.attr("align")?this.$source.attr("align"):this.opts.align},getBlockPadding:function(){return this.$blockCell.css("padding")},getColumnSpacerWidth:function(){return this.$blockCell.find('[data-element-type="column-spacer"]').attr("width")+"px"},getBackgroundColor:function(){var t=this.$source.attr("background-color");return null==t?"none":this.utils.getHexValue(t)},getBorderSize:function(){return this.$blockCell.css("border-width")},getBorderColor:function(){return this.utils.getHexValue(this.$blockCell.css("border-color"))},getBorderRadius:function(){return this.$blockCell.css("border-radius")},setBlockAlign:function(t){this.$blockCell.attr("align",t),this.$source.attr("align",t),this.$blockCell.find('[data-element-type="column"], [data-element-type="text"], [data-element-type="heading"], [data-element-type="image"], [data-element-type="button-link"]').each(function(e){l.dom(e).dataget("instance").setAlign(t)}.bind(this))},setBlockPadding:function(t){this.$blockCell.css("padding",t),this.$source.attr("padding",t)},setColumnSpacerWidth:function(t){this.$blockCell.find('[data-element-type="column-spacer"]').each(function(e){l.dom(e).dataget("instance").setWidth(t)}.bind(this))},setBackgroundColor:function(t){this._setBackgroundColor(t,this.$blockCell,this.$source)},setBorderSize:function(t){var e=this.$blockCell.css("border-color"),i=t+" solid "+this.utils.getHexValue(e);this.$blockCell.css("border",i),this.$source.attr("border",i)},setBorderColor:function(t){var e=this.$blockCell.css("border-width"),i=(e=""===e?"1px":e)+" solid "+t;this.$blockCell.css("border",i),this.$source.attr("border",i)},setBorderRadius:function(t){this.css("border-collapse","separate"),this.$blockCell.css("border-radius",t),this.$source.attr("border-radius",t)}}),l.add("class","template.spacer",{extends:["dom","template"],tools:{Spacer:{"spacer-size":{tool:"size",label:"Height",prop:"height",getter:"getHeight",setter:"setHeight"}}},build:function(){this.$source=this.getSource();var t=this.$source.attr("height")||"1px",e=this.$source.attr("width")||"100%",i={attrs:{width:this._normalizeWidthAttr(e)},css:{width:e}};this.parse(this.createTable(i)),this.addClass("container");var s=l.dom("<tr>");this.$spacerCell=l.dom("<td>"),this.$spacerCell.html("&nbsp;"),this.$spacerCell.css({padding:0,"font-size":t,"line-height":t}),this.injectAttr(this.$spacerCell,this.$source,["width"]),s.append(this.$spacerCell),this.append(s),this.setContainer(this.$spacerCell)},getHeight:function(){return this.$source.attr("height")},setHeight:function(t){this.$spacerCell.css({"font-size":t,"line-height":t,height:t}),this.$spacerCell.attr("height",t),this.$source.attr("height",t)}}),l.add("class","template.divider",{extends:["dom","template"],tools:{Divider:{"divider-size":{tool:"size",label:"Height",prop:"height",getter:"getHeight",setter:"setHeight"},"divider-color":{tool:"color",label:"Color",prop:"background-color",getter:"getBackgroundColor",setter:"setBackgroundColor"}}},build:function(){this.$source=this.getSource();var t=this.$source.attr("height")?this.$source.attr("height"):"1px",e=this.$source.attr("width")?this.$source.attr("width"):"100%",i={attrs:{width:this._normalizeWidthAttr(e)},css:{width:e}};this.parse(this.createTable(i)),this.addClass("container");var s=l.dom("<tr>");this.$dividerCell=l.dom("<td>"),this.$dividerCell.html("&nbsp;"),this.$dividerCell.attr({valign:"top"}),this.$dividerCell.css({"vertical-align":"top",padding:0,"font-size":t,"line-height":t}),this.injectAttr(this.$dividerCell,this.$source,["width"]),s.append(this.$dividerCell),this.append(s),this.setContainer(this.$dividerCell)},getHeight:function(){return this.$source.attr("height")},getBackgroundColor:function(){var t=this.$source.attr("background-color");return null==t?"none":this.utils.getHexValue(t)},setHeight:function(t){this.$dividerCell.css({"font-size":t,"line-height":t,height:t}),this.$dividerCell.attr("height",t),this.$source.attr("height",t)},setBackgroundColor:function(t){this._setBackgroundColor(t,this.$dividerCell,this.$source)}}),l.add("class","template.grid",{extends:["dom","template"],build:function(){this.parse(this.createTable({attrs:{width:"100%"},css:{width:"100%"}})),this.setContainer(this)}}),l.add("class","template.row",{extends:["dom","template"],build:function(){this.parse("<tr>"),this.setContainer(this)}}),l.add("class","template.column",{extends:["dom","template"],tools:{Column:{"column-align":{tool:"align",label:"Align",prop:"align",getter:"getColumnAlign",setter:"setColumnAlign"},"column-padding":{tool:"size",label:"Padding",prop:"padding",getter:"getColumnPadding",setter:"setColumnPadding"}}},build:function(){this.$source=this.getSource();var t=this.$source.attr("align")?this.$source.attr("align"):this.opts.align;this.parse("<td>"),this.addClass("mobile"),this.attr({align:t,valign:"top"}),this.css({"vertical-align":"top"}),this.$source.attr("mc-edit")&&this.attr("mc:edit",this.randomId),this.injectAttr(this,this.$source,["align"]),this.setContainer(this)},setAlign:function(t){this.attr("align",t),this.$source.attr("align",t)},setColumnAlign:function(t){this.setAlign(t),this.find('[data-element-type="text"], [data-element-type="heading"], [data-element-type="image"], [data-element-type="button-link"]').each(function(e){l.dom(e).dataget("instance").setAlign(t)}.bind(this))},setColumnPadding:function(t){this.css("padding",t),this.$source.attr("padding",t)},getColumnAlign:function(){return this.$source.attr("align")?this.$source.attr("align"):"left"},getColumnPadding:function(){return this.css("padding")}}),l.add("class","template.column-spacer",{extends:["dom","template"],build:function(){this.$source=this.getSource(),this.parse("<td>"),this.addClass("mobile-hidden"),this.html("&nbsp;"),this.injectAttr(this,this.$source),this.setContainer(this)},setWidth:function(t){this.attr("width",parseInt(t)),this.css("width",t),this.$source.attr("width",t)}}),l.add("class","template.text",{extends:["dom","template"],tools:{Text:{"text-color":{tool:"color",label:"Color",prop:"color",getter:"getColor",setter:"setColor"},"text-size":{tool:"size",label:"Font Size",prop:"font-size",getter:"getTextSize",setter:"setTextSize"}}},build:function(){this.$source=this.getSource();var t=this._parseLinks(this.$source.html()),e=this._getTextLineHeight(this.$source);this.parse(this.createTable({attrs:{width:"100%"},css:{width:"100%"}}));var i=l.dom("<tr>");this.$textCell=l.dom("<td>"),this.$textCell.addClass("re-editable"),this.$textCell.html(t),this.$textCell.attr({valign:"top","mc:edit":this.randomId}),this.$textCell.css({"vertical-align":"top","font-family":this.opts.styles.text["font-family"],"font-size":this.opts.styles.text["font-size"],"line-height":e,color:this.opts.styles.text.color}),i.append(this.$textCell),this.append(i),this.injectAttr(this.$textCell,this.$source),this.setContainer(this.$textCell)},saveColor:function(){this.tmpColor=this.getColor()},setAlign:function(t){this.$textCell.attr("align",t),this.$textCell.css("text-align",t),this.$source.attr("align",t)},setColor:function(t,e){t=e&&this.tmpColor?this.tmpColor:t,this.$source.attr("color",t),this.$textCell.css("color",t)},setSize:function(t,e){this.$source.attr({"font-size":t,"line-height":e}),this.$textCell.css({"font-size":t,"line-height":e})},setTextSize:function(t){var e=parseInt(t)*this.opts.textLineHeight+"px";this.setSize(t,e)},getColor:function(){return this.utils.getHexValue(this.$textCell.css("color"))},getTextSize:function(){return this.$textCell.css("font-size")}}),l.add("class","template.heading",{extends:["dom","template"],tools:{Heading:{"heading-color":{tool:"color",label:"Color",prop:"color",getter:"getColor",setter:"setColor"},"heading-size":{tool:"size",label:"Font Size",prop:"font-size",getter:"getHeadingSize",setter:"setHeadingSize"},"heading-url":{tool:"url",label:"Url",prop:"href",getter:"getHeadingUrl",setter:"setHeadingUrl"}}},build:function(){this.$source=this.getSource();var t=this.$source.attr("type")?this.$source.attr("type"):"h1",e=this.$source.attr("href"),i=this.$source.html(),s=this.$source.attr("font-size")||this.opts.headings[t];this.parse(this.createTable({attrs:{width:"100%"},css:{width:"100%"}}));var o=l.dom("<tr>");this.$headingCell=l.dom("<td>"),this.$headingCell.attr({valign:"top","mc:edit":this.randomId}),this.$headingCell.css({"vertical-align":"top","font-family":this.opts.styles.text["font-family"],"font-size":s,"font-weight":"bold","line-height":this._getHeadingLineHeight(s)+"px",color:this.opts.styles.text.color}),o.append(this.$headingCell),e?(this.$headingLink=l.dom("<a>"),this.$headingLink.attr({target:"_blank"}),this.$headingLink.css({"font-family":this.opts.styles.text["font-family"],"font-size":s,"font-weight":"bold","line-height":this._getHeadingLineHeight(s)+"px",color:this.opts.styles.text.color,"text-decoration":"none"}),this.$headingLink.addClass("re-editable"),this.$headingLink.html(i),this.$headingCell.append(this.$headingLink),this.injectAttr(this.$headingLink,this.$source,["padding","class","type"]),this.setContainer(this.$headingLink)):(this.$headingCell.addClass("re-editable"),this.$headingCell.html(i),this.setContainer(this.$headingCell)),this.injectAttr(this.$headingCell,this.$source,["href","type","text-decoration"]),this.append(o)},saveColor:function(){this.tmpColor=this.getColor()},setAlign:function(t){this.$headingCell.attr("align",t),this.$headingCell.css("text-align",t),this.$source.attr("align",t)},setColor:function(t,e){t=e&&this.tmpColor?this.tmpColor:t,this.$source.attr("color",t),this.$headingCell.css("color",t),this.$headingLink&&this.$headingLink.css("color",t)},setHeadingSize:function(t){var e=this._getHeadingLineHeight(t)+"px";this.$source.attr({"font-size":t,"line-height":e}),this.$headingCell.css({"font-size":t,"line-height":e}),this.$headingLink&&this.$headingLink.css({"font-size":t,"line-height":e})},setHeadingUrl:function(t){if(""===t.trim()){if(this.$source.removeAttr("href"),this.$headingLink){var e=this.$headingLink.html();this.$headingLink.remove(),this.$headingCell.html(e),this.$headingLink=!1}}else if(this.$headingLink)this.$headingLink.attr("href",t),this.$source.attr("href",t);else{e=this.$headingCell.html();var i=this.$headingCell.css("font-size"),s=this.$headingCell.css("color");this.$headingLink=l.dom("<a>"),this.$headingLink.attr({target:"_blank"}),this.$headingLink.css({"font-family":this.opts.styles.text["font-family"],"font-size":i,"font-weight":"bold","line-height":this._getHeadingLineHeight(i)+"px",color:s,"text-decoration":"none"}),this.$headingLink.addClass("re-editable"),this.$headingLink.attr("href",t),this.$headingLink.html(e),this.$headingCell.html(this.$headingLink),this.$source.attr("href",t)}},getColor:function(){return this.utils.getHexValue(this.$headingCell.css("color"))},getHeadingSize:function(){return this.$headingCell.css("font-size")},getHeadingUrl:function(){return this.$source.attr("href")}}),l.add("class","template.button",{extends:["dom","template"],tools:{Button:{"button-url":{tool:"url",label:"Url",prop:"href",getter:"getButtonUrl",setter:"setButtonUrl"},"button-color":{tool:"color",label:"Text",prop:"color",getter:"getButtonColor",setter:"setButtonColor"},"button-background":{tool:"color",label:"Back",prop:"background-color",getter:"getButtonBackgroundColor",setter:"setButtonBackgroundColor"}}},build:function(){this.$source=this.getSource();var t=this.$source.html(),e=this.$source.attr("background-color")||this.opts.styles.button["background-color"],i=this.$source.attr("background-color")||this.opts.styles.button["background-color"];this.parse(this.createTable({css:{width:"auto"}}));var s=l.dom("<tr>");this.$buttonCell=l.dom("<td>"),this.$buttonCell.attr({valign:"top",bgcolor:i,align:"center"}),this.$buttonCell.css({"vertical-align":"top","text-align":"center","font-family":this.opts.styles.text["font-family"],"font-size":this.opts.styles.button["font-size"],"font-weight":this.opts.styles.button["font-weight"],color:this.opts.styles.button.color,"background-color":i,"border-radius":"4px"}),this.$buttonLink=l.dom("<a>"),this.$buttonLink.html(t),this.$buttonLink.addClass("re-editable"),this.$buttonLink.attr({target:"_blank","mc:edit":this.randomId}),this.$buttonLink.css({display:"inline-block","box-sizing":"border-box",cursor:"pointer","text-decoration":"none",margin:0,padding:"12px 20px",border:"1px solid "+e,"font-family":this.opts.styles.text["font-family"],"font-size":this.opts.styles.button["font-size"],"font-weight":this.opts.styles.button["font-weight"],color:this.opts.styles.button.color,"background-color":i,"border-radius":"4px"}),this.injectAttr(this.$buttonLink,this.$source,["class"]),this.injectAttr(this.$buttonCell,this.$source,["border","padding","href"]),this.$buttonCell.append(this.$buttonLink),s.append(this.$buttonCell),this.append(s),this.setContainer(this.$buttonCell)},getButtonUrl:function(){return this.$source.attr("href")},getButtonColor:function(){return this.utils.getHexValue(this.$buttonLink.css("color"))},getButtonBackgroundColor:function(){return this.utils.getHexValue(this.$buttonLink.css("background-color"))},setButtonUrl:function(t){this.$buttonLink.attr("href",t),this.$source.attr("href",t)},setButtonColor:function(t){this.$buttonLink.css("color",t),this.$buttonCell.css("color",t),this.$source.attr("color",t)},setButtonBackgroundColor:function(t){this.$buttonLink.css("background-color",t),this.$buttonLink.css("border-color",t),this.$buttonCell.css("background-color",t),this.$source.attr("background-color",t)}}),l.add("class","template.button-link",{extends:["dom","template"],tools:{"Button Link":{"button-url":{tool:"url",label:"Url",prop:"href",getter:"getButtonUrl",setter:"setButtonUrl"}}},build:function(){this.$source=this.getSource();var t=this.$source.html();this.parse(this.createTable({attrs:{width:"100%"},css:{width:"100%"}}));var e=l.dom("<tr>");this.$buttonCell=l.dom("<td>"),this.$buttonCell.attr({valign:"top"}),this.$buttonCell.css({"vertical-align":"top"}),this.$buttonLink=l.dom("<a>"),this.$buttonLink.html(t),this.$buttonLink.addClass("re-editable"),this.$buttonLink.attr({target:"_blank","mc:edit":this.randomId}),this.$buttonLink.css({cursor:"pointer","text-decoration":"underline","font-family":this.opts.styles.text["font-family"],"font-size":"20px","font-weight":"normal","line-height":"30px",color:this.opts.styles.link.color}),this.injectAttr(this.$buttonLink,this.$source,["align","padding","class"]),this.injectAttr(this.$buttonCell,this.$source,["text-decoration","href"]),this.$buttonCell.append(this.$buttonLink),e.append(this.$buttonCell),this.append(e),this.setContainer(this.$buttonCell)},getButtonUrl:function(){return this.$source.attr("href")},setAlign:function(t){this.$buttonCell.attr("align",t),this.$buttonCell.css("text-align",t),this.$source.attr("align",t)},setButtonUrl:function(t){this.$buttonLink.attr("href",t),this.$source.attr("href",t)}}),l.add("class","template.button-app",{extends:["dom","template"],tools:{"Button App":{"button-url":{tool:"url",label:"Url",prop:"href",getter:"getButtonUrl",setter:"setButtonUrl"}}},build:function(){this.$source=this.getSource();var t=this.$source.html(),e=this.$source.attr("href");this.parse("<a>"),this.html(t),this.attr({target:"_blank",href:e}),this.css({cursor:"pointer","text-decoration":"none","font-size":"0px","line-height":"100%"});var i=l.dom("<img>");i.attr({border:0,alt:t}),this.injectAttr(this,this.$source,["width","src"]),this.injectAttr(i,this.$source,["href"]),this.append(i),this.setContainer(this)},getButtonUrl:function(){return this.$source.attr("href")},setButtonUrl:function(t){this.attr("href",t),this.$source.attr("href",t)}}),l.add("class","template.image",{extends:["dom","template"],tools:{Image:{image:{tool:"upload",label:!1,prop:"background-image",getter:"getImage",setter:"setImage"},"image-url":{tool:"url",label:"Url",prop:"href",getter:"getImageUrl",setter:"setImageUrl"}}},build:function(){this.$source=this.getSource();var t=this.$source.attr("href"),e=this.$source.html(),i=this.$source.attr("width")?this.$source.attr("width"):"100%",s=this.$source.attr("src")||"",o=this.$source.attr("border-radius");this.parse(this.createTable({attrs:{width:"100%"},css:{width:"100%"}}));var a=l.dom("<tr>");this.$imageCell=l.dom("<td>"),this.$imageCell.attr({valign:"middle","mc:edit":this.randomId}),this.$imageCell.css({"vertical-align":"middle"}),this.$image=this.createImage(),this.$image.attr({alt:e,width:this._normalizeWidthAttr(i),src:s}),o&&this.$image.css({"border-radius":o}),a.append(this.$imageCell),t?(this.$imageLink=l.dom("<a>"),this.$imageLink.attr({target:"_blank",href:t}),this.$imageLink.css({cursor:"pointer","font-size":"0px","line-height":"100%","text-decoration":"none"}),this.$imageLink.append(this.$image),this.$imageCell.append(this.$imageLink)):this.$imageCell.append(this.$image),this.injectAttr(this.$imageCell,this.$source,["href","src","width","border-radius"]),this.append(a),this.setContainer(this.$imageCell)},setAlign:function(t){this.$imageCell.attr("align",t),this.$imageCell.css("text-align",t),this.$source.attr("align",t)},setImage:function(t){this.$image.attr("src",t),this.$source.attr("src",t)},setImageUrl:function(t){""===t.trim()?(this.$source.removeAttr("href"),this.$imageLink&&(this.$imageLink.after(this.$image),this.$imageLink.remove(),this.$imageLink=!1)):this.$imageLink?(this.$imageLink.attr("href",t),this.$source.attr("href",t)):(this.$imageLink=l.dom("<a>"),this.$imageLink.attr({target:"_blank",href:t}),this.$imageLink.css({cursor:"pointer","font-size":"0px","line-height":"100%","text-decoration":"none"}),this.$imageLink.append(this.$image),this.$imageCell.html(this.$imageLink),this.$source.attr("href",t))},getImage:function(){return this.$source.attr("src")},getImageUrl:function(){return this.$source.attr("href")}}),l.add("class","template.link",{extends:["dom","template"],build:function(){this.$source=this.getSource();var t={"text-decoration":"underline","font-family":this.opts.styles.text["font-family"],"font-size":this.opts.styles.text["font-size"],"font-weight":"normal","line-height":this.opts.styles.text["line-height"],color:this.opts.styles.link.color};this.parse("<a>"),this.css(t),this.attr({target:"_blank"}),this.html(this.$source.html()),this.injectAttr(this,this.$source),this.setContainer(this)},saveColor:function(){this.tmpColor=this.utils.getHexValue(this.css("color"))},setColor:function(t,e){t=e&&this.tmpColor?this.tmpColor:t,this.$source.attr("color",t),this.css("color",t)},setSize:function(t,e){this.$source.attr({"font-size":t,"line-height":e}),this.css({"font-size":t,"line-height":e})}}),l.add("class","template.social-link",{extends:["dom","template"],build:function(){var t=this.getSource(),e=t.attr("href"),i=t.attr("src"),s=t.html(),o="20px",a={"text-decoration":"none","font-size":o,"line-height":o,display:"inline-block"},n={target:"_blank",href:e,"mc:edit":this.randomId};this.parse("<a>"),this.attr(n),this.css(a);var r=this.createImage();r.attr({width:parseInt(o),src:i,alt:s}),this.append(r),this.setContainer(this)}}),l.add("class","template.menu-link",{extends:["dom","template"],build:function(){var t=this.getSource(),e=t.attr("href"),i=t.html(),s={"text-decoration":"none","font-family":this.opts.styles.text["font-family"],"font-size":this.opts.styles.text["font-size"],"font-weight":"bold","line-height":this.opts.styles.text["line-height"],color:this.opts.styles.text.color},o={target:"_blank",href:e};this.parse("<a>"),this.html(i),this.css(s),this.attr(o),this.injectAttr(this,t),this.setContainer(this)}}),l.add("class","template.mobile-spacer",{extends:["dom","template"],build:function(){var t=this.getSource();this.parse(this.createTable({attrs:{width:"100%"},css:{width:"100%"}})),this.addClass("mobile-spacer");var e=l.dom("<tr>"),i=l.dom("<td>");i.html("&nbsp;"),i.css({valign:"top"}),i.css({"vertical-align":"top","font-size":"0px","line-height":0}),this.injectAttr(i,t),e.append(i),this.append(e),this.setContainer(i)}}),l.add("class","template.preheader",{extends:["dom","template"],build:function(){var t=this.getSource();this.parse("<span>"),this.css({color:"transparent",display:"none",height:0,"max-height":0,"max-width":0,opacity:0,overflow:"hidden","mso-hide":"all",visibility:"hidden",width:0}),this.html(t.html()),this.setContainer(this)}}),l.add("class","template.inline-spacer",{extends:["dom","template"],build:function(){var t=this.getSource(),e=t.html(),i=""===e.trim();e=i?"&nbsp;":e,this.parse("<span>"),this.css({display:"inline-block","line-height":0,"font-family":this.opts.styles.text["font-family"],"font-size":this.opts.styles.text["font-size"],color:this.opts.styles.text.color}),i&&this.css("width","0px"),this.html(e),this.injectAttr(this,t),this.setContainer(this)}}),l.add("service","tool",{init:function(t){this.app=t},build:function(t){return this.$el=t,this.$html=l.dom("<div>"),this.$html.addClass("re-tools"),this.$el.hasClass("re-card")?this._buildCard():this._buildBlock()},_buildCard:function(){var t=this.$el.dataget("instance"),e=t.tools;for(var i in e){var s=e[i],o=l.dom("<h5>");for(var a in o.html(i),this.$html.append(o),s)if("upload-back"!==s[a].tool||!1!==this.opts.upload){var n=l.dom("<div>");if(n.addClass("re-tool-container"),!1!==s[a].label){var r=l.dom("<div>");r.addClass("re-tool-label"),r.html(s[a].label)}var h=l.dom("<div>");h.addClass("re-tool-input");var d=l.create("tool."+s[a].tool,this.app,s[a],t);h.append(d),!1!==s[a].label&&n.append(r),n.append(h),this.$html.append(n)}}return this.$html},_buildBlock:function(){var t=this.$el.dataget("instance"),e=l.dom("<h5>");e.html("Block"),this.$html.append(e);var i=l.dom("<div>").addClass("re-slide-container re-slide-container-block"),s=t.tools,o={};if(0===this.$el.find('[data-element-type="column-spacer"]').first().length)for(var a in s)for(var n in o[a]={},s[a])"column-space"!==n&&(o[a][n]=s[a][n]);else o=s;this._createTool(o,i,t),this.$html.append(i);var r=this.$el.find('[data-element-type="image"]'),h=this.$el.find('[data-element-type="heading"]'),d=this.$el.find('[data-element-type="text"]'),c=this.$el.find('[data-element-type="button"]'),p=this.$el.find('[data-element-type="button-link"]'),u=this.$el.find('[data-element-type="button-app"]'),f=this.$el.find('[data-element-type="spacer"]'),g=this.$el.find('[data-element-type="divider"]'),m=this.$el.find('[data-element-type="column"]');return this._createSlideContainer(r,"Image"),this._createSlideContainer(h,"Heading"),this._createSlideContainer(d,"Text"),this._createSlideContainer(c,"Button"),this._createSlideContainer(p,"Button Link"),this._createSlideContainer(u,"Button App"),this._createSlideContainer(f,"Spacer"),this._createSlideContainer(g,"Divider"),this._createSlideContainer(m,"Column"),this.$html},_createSlideContainer:function(t,e){if(0!==t.length){var i=l.dom("<div>");i.addClass("re-slide-container"),t.each(function(s,o){var a=l.dom(s),n=l.dom("<div>");n.addClass("re-slide-box");var r=a.dataget("instance"),h=r.tools;this._createTool(h,n,r);var d=this._createName(e,t,o);n.prepend(d),i.append(n)}.bind(this)),this.$html.append(i)}},_createName:function(t,e,i){var s=l.dom("<h5>"),o=1===e.length?"":" "+parseInt(i+1);return s.html(t+o),s},_createTool:function(t,e,i){var s=i.attr("data-element-type");for(var o in t){var a=t[o];for(var n in a)if("image"!==s||"upload"!==a[n].tool||!1!==this.opts.upload){var r=l.dom("<div>");if(r.addClass("re-slide-tool-container"),!1!==a[n].label){var h=l.dom("<div>");h.addClass("re-slide-tool-label"),h.html(a[n].label)}var d=l.dom("<div>");d.addClass("re-slide-tool-input");var c=l.create("tool."+a[n].tool,this.app,a[n],i);d.append(c),!1!==a[n].label&&r.append(h),r.append(d),e.append(r)}}}}),l.add("class","tool.align",{init:function(t,e,i){return this.app=t,this.opts=t.opts,this.utils=t.utils,this.template=t.template,this.instance=i,this.props=e,this._create(),this._createValue(),this._createInput(),this._createEvents(),this.$tool},_create:function(){this.$tool=l.dom("<div>"),this.$tool.addClass("re-tool"),this.$tool.attr("data-type",this.name)},_createValue:function(){this.value=this.instance[this.props.getter]()},_createInput:function(){this.$inputContainer=l.dom("<div>"),this.$inputContainer.addClass("re-align-container"),this.$input={};for(var t=["left","center","right"],e=0;e<t.length;e++)this.$input[t[e]]=l.dom("<span>"),this.$input[t[e]].addClass("re-align-span"),this.$input[t[e]].attr("data-type",t[e]),this.$input[t[e]].html(this.opts.icons["align-"+t[e]]);for(var i in this.$input)i===this.value&&this.$input[i].addClass("is-re-active"),this.$inputContainer.append(this.$input[i]);this.$tool.append(this.$inputContainer)},_createEvents:function(){for(var t in this.$input)this.$input[t].on("click",this._setAlign.bind(this))},_setAlign:function(t){t.preventDefault(),this.$inputContainer.find("span").removeClass("is-re-active");var e=l.dom(t.target).closest(".re-align-span"),i=e.attr("data-type");e.addClass("is-re-active"),this.instance[this.props.setter](i),this.app.broadcast("adjustHeight"),this.app.broadcast("changed",this,this.instance)}}),l.add("class","tool.color",{init:function(t,e,i){return this.app=t,this.tool=t.tool,this.opts=t.opts,this.frame=t.frame,this.instance=i,this.props=e,this.colors={gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},this._create(),this._createValue(),this._createInput(),this._createEvents(),this.$tool},_create:function(){this.$tool=l.dom("<div>"),this.$tool.addClass("re-tool"),this.$tool.attr("data-type",this.name)},_createValue:function(){this.value=this.instance[this.props.getter]()},_createInput:function(){this.$inputContainer=l.dom("<div>"),this.$inputContainer.addClass("is-re-prepend"),this.$inputPrepend=l.dom("<span>"),this.$colorSelect=l.dom("<b>"),this.$colorSelect.addClass("re-color-select"),this.$input=l.dom("<input>"),this.$input.attr("type","text"),"none"===this.value?(this.$colorSelect.css("background-color","#ffffff"),this.$input.val("")):(this.$colorSelect.css("background-color",this.value),this.$input.val(this.value)),this.$inputPrepend.append(this.$colorSelect),this.$inputContainer.append(this.$inputPrepend),this.$inputContainer.append(this.$input),this.$tool.append(this.$inputContainer)},_createEvents:function(){this.$input.on("keydown blur",this._setValue.bind(this)),this.$colorSelect.on("click",this._openColor.bind(this))},_setValue:function(t){if("keydown"!==t.type||13===t.which){"keydown"===t.type&&t.preventDefault();var e="#"+this.$input.val().replace("#","");this._setColor(e)}},_setColor:function(t,e){"none"===t?(this.$colorSelect.css("background-color","#ffffff"),this.$input.val("")):this.$colorSelect.css("background-color",t),this.instance[this.props.setter](t,e),this.app.broadcast("adjustHeight"),this.app.broadcast("changed",this,this.instance)},_openColor:function(t){var e=this.frame.getBody(),i=(l.dom(t.target).closest(".re-color-select"),e.find("#re-color-picker"));if(0!==i.length)return i.remove(),void e.off(".revolvapp.color-picker");this.$colorPicker=l.dom("<div>"),this.$colorPicker.attr("id","re-color-picker"),this.$colorPicker.addClass("re-color-picker");var s=this.opts.baseColors;if("background-color"===this.props.prop)-1===s.indexOf("none")&&s.unshift("none");else{var o=s.indexOf("none");-1!==o&&s.splice(o,1)}for(var a=l.dom('<div class="re-base-colors">'),n=0;n<s.length;n++){var r=s[n],h=this._createColor(r,"base",n);a.append(h)}for(var d in this.$colorPicker.append(a),this.colors){for(a=l.dom('<div class="re-colors">'),n=0;n<this.colors[d].length;n++){r=this.colors[d][n],h=this._createColor(r,d,n);a.append(h)}this.$colorPicker.append(a)}var c=this.$inputContainer.offset(),p=this.$inputContainer.height();this.$colorPicker.css({top:c.top+p+"px",left:c.left+"px"}),e.append(this.$colorPicker),e.on("click.revolvapp.color-picker",this._closeColorPicker.bind(this)),e.on("keydown.revolvapp.color-picker",this._closeColorPicker.bind(this)),this.app.broadcast("adjustHeight",this,this.$colorPicker.height())},_closeColorPicker:function(t){var e=l.dom(t.target).closest(".re-color-select"),i=l.dom(t.target).closest(".re-color");0===e.length&&(0===i.length&&this._setColor(this.value,!0),this.$colorPicker.remove(),this.frame.getBody().off(".revolvapp.color-picker"),this.app.broadcast("adjustHeight"))},_createColor:function(t,e,i){var s=l.dom("<span>");return s.attr("title",e+"-"+i),s.attr("data-value",t),s.addClass("re-color"),"none"===t?s.addClass("re-color-none"):s.css("background-color",t),s.on("click",this._selectColor.bind(this)),s.on("mouseover",this._selectColor.bind(this)),s},_selectColor:function(t){var e=l.dom(t.target).attr("data-value");this._setColor(e),e="none"===e?"":e,this.$input.val(e)}}),l.add("class","tool.url",{init:function(t,e,i){return this.app=t,this.opts=t.opts,this.utils=t.utils,this.template=t.template,this.instance=i,this.props=e,this._create(),this._createValue(),this._createInput(),this._createEvents(),this.$tool},_create:function(){this.$tool=l.dom("<div>"),this.$tool.addClass("re-tool"),this.$tool.attr("data-type",this.name)},_createInput:function(){this.$input=l.dom("<input>"),this.$input.attr("type","url"),this.value&&this.$input.val(this.value),this.$tool.append(this.$input)},_createValue:function(){this.value=this.instance[this.props.getter]()},_createEvents:function(){this.$input.on("keydown blur",this._setUrl.bind(this))},_setUrl:function(t){if("keydown"!==t.type||13===t.which){"keydown"===t.type&&t.preventDefault();var e=this.$input.val();this.instance[this.props.setter](e),this.app.broadcast("adjustHeight"),this.app.broadcast("observeImages"),this.app.broadcast("changed",this,this.instance)}}}),l.add("class","tool.size",{init:function(t,e,i){return this.app=t,this.opts=t.opts,this.instance=i,this.props=e,this._create(),this._createValue(),this._createInput(),this._createEvents(),this.$tool},_create:function(){this.$tool=l.dom("<div>"),this.$tool.addClass("re-tool"),this.$tool.attr("data-type",this.name)},_createValue:function(){this.value=this.instance[this.props.getter]()},_createInput:function(){this.$input=l.dom("<input>"),this.$input.attr("type","text"),this.$input.val(this.value),this.$tool.append(this.$input)},_createEvents:function(){this.$input.on("keydown blur",this._setSize.bind(this))},_setSize:function(t){if("keydown"!==t.type||13===t.which){"keydown"===t.type&&t.preventDefault();var e=this.$input.val();this.instance[this.props.setter](e),this.app.broadcast("adjustHeight"),this.app.broadcast("changed",this,this.instance)}}}),l.add("class","tool.upload-back",{init:function(t,e,i){return this.app=t,this.opts=t.opts,this.card=t.card,this.utils=t.utils,this.upload=t.upload,this.template=t.template,this.instance=i,this.props=e,this.defaultPosition="cover",this._create(),this._createInput(),this._createUpload(),this._createValue(),this._createEvents(),this.$tool},_create:function(){this.$tool=l.dom("<div>"),this.$tool.addClass("re-tool"),this.$tool.attr("data-type",this.name)},_createValue:function(){if(this.value=this.instance[this.props.getter](),this.value.image){if(this.opts.images){var t=this.value.image.split("/"),e=t[t.length-1];this.value.image=this.opts.images+e}var i=l.dom("<img>");i.attr("src",this.value.image),this.upload.set(i);var s="cover"!==this.value.size;this.$patternInput.attr("checked",s)}},_createInput:function(){this.$uploadItem=l.dom("<input>"),this.$uploadItem.attr("type","file"),this.$uploadItem.attr("name","file"),this.$patternLabel=l.dom("<label>"),this.$patternLabel.html("Pattern"),this.$patternInput=l.dom("<input>"),this.$patternInput.attr("type","checkbox"),this.$patternLabel.prepend(this.$patternInput),this.$tool.append(this.$uploadItem),this.$tool.append(this.$patternLabel)},_createUpload:function(){this.upload.build(this.$uploadItem,this._uploadComplete.bind(this),this._uploadRemove.bind(this))},_createEvents:function(){this.$patternInput.on("change",this._setBackgroundSize.bind(this))},_setBackgroundSize:function(){var t=this.$patternInput.attr("checked")?"auto":"cover";this.instance[this.props.setter](!1,t),this.app.broadcast("changed",this,this.instance)},_uploadRemove:function(){this.$patternInput.attr("checked",!1),this.instance[this.props.setter](!1,!1),this.app.broadcast("changed",this,this.instance)},_uploadComplete:function(t){var e=this.$patternInput.attr("checked")?"auto":"cover";this.instance[this.props.setter](t.url,e),this.app.broadcast("changed",this,this.instance)}}),l.add("class","tool.upload",{init:function(t,e,i){return this.app=t,this.opts=t.opts,this.card=t.card,this.utils=t.utils,this.upload=t.upload,this.template=t.template,this.instance=i,this.props=e,this._create(),this._createInput(),this._createUpload(),this._createValue(),this.$tool},_create:function(){this.$tool=l.dom("<div>"),this.$tool.addClass("re-tool"),this.$tool.attr("data-type",this.name)},_createValue:function(){this.value=this.instance[this.props.getter]();var t=l.dom("<img>");if(this.opts.images){var e=this.value.split("/"),i=e[e.length-1];this.value=this.opts.images+i}t.attr("src",this.value),this.upload.set(t,!1)},_createInput:function(){this.$uploadItem=l.dom("<input>"),this.$uploadItem.attr("type","file"),this.$uploadItem.attr("name","file"),this.$tool.append(this.$uploadItem)},_createUpload:function(){this.$upload=this.upload.build(this.$uploadItem,this._uploadComplete.bind(this),!1,120)},_uploadComplete:function(t){this.instance[this.props.setter](t.url),this.app.broadcast("changed",this,this.instance)}}),l.add("module","builder",{init:function(t){this.app=t,this.opts=t.opts,this.frame=t.frame,this.panel=t.panel,this.template=t.template},onmessage:{loaded:function(){this._build()}},_build:function(){this.frame.setCode(this.template.getInitialCode()),this.frame.load(this._load.bind(this))},_load:function(){this.panel.build(),this.template.build(this.frame.getSource()),setTimeout(function(){this.frame.buildCss(),this.frame.buildUndo(),this.frame.buildClick(),setTimeout(function(){this.app.broadcast("built",this),this.app.broadcast("composed",this),this.app.broadcast("images.observe",this),this.app.broadcast("adjustHeight",this),this.frame.getElement().css("visibility","visible")}.bind(this),50)}.bind(this),50)}}),l.add("module","main",{init:function(t){this.app=t,this.opts=t.opts,this.frame=t.frame,this.slide=t.slide,this.upload=t.upload,this.control=t.control,this.element=t.element,this.dropdown=t.dropdown,this.template=t.template,this.app.starter(this,10)},start:function(){this._build()},onmessage:{changed:function(t){this._autosave()},adjustHeight:function(t,e){this.frame.adjustHeight(e)},images:{observe:function(t){this._observeImages()}},readonly:{enable:function(){var t=this.frame.getBody();t.find("[contenteditable]").attr("contenteditable",!1),t.find(".re-block").removeClass("is-re-active").addClass("is-re-readonly"),t.find(".re-card").removeClass("is-re-active"),this.control.hide("card"),this.control.hide("block"),this.slide.close(),this.dropdown.close()},disable:function(){var t=this.frame.getBody();t.find("[contenteditable]").attr("contenteditable",!0),t.find(".re-block").removeClass("is-re-readonly"),this.control.show("card")}}},_build:function(){this._buildFrame(),this._buildTemplate()},_buildFrame:function(){this.$frame=this.frame.getElement(),this.$frame.attr("scrolling","no"),this.$frame.css(this.opts.frame),this.$frame.css({display:"block",visibility:"hidden"})},_buildTemplate:function(){l.ajax.get({url:this.opts.template,success:this._buildCode.bind(this)})},_buildCode:function(t){this.frame.setSource(t),this.app.broadcast("loaded",this)},_observeImages:function(){var t=this;this.frame.getCards().find('[data-element-type="image"]').each(function(e){var i=l.dom(e);!1!==t.opts.upload&&t.upload.push(i,function(t){i.dataget("instance").setImage(t.url)})})},_autosave:function(){if(!1!==this.opts.autosave){var t=this.frame.getHtml(),e=this.frame.getTemplate();l.ajax.post({url:this.opts.autosave,data:{html:t,template:e}})}}}),l.add("module","preview",{init:function(t){this.app=t,this.opts=t.opts,this.frame=t.frame,this.panel=t.panel,this.template=t.template,this.previewButtons={desktop:{name:"desktop",icon:this.opts.icons.desktop,callback:this._toggle.bind(this)},mobile:{name:"mobile",icon:this.opts.icons.mobile,callback:this._toggle.bind(this)}}},onmessage:{built:function(){this._build()}},_build:function(){for(var t in this.previewButtons)this.panel.add(this.previewButtons[t],"left");this.panel.addActive("desktop")},_toggle:function(t){var e=this.frame.getElement(),i="desktop"===t?"readonly.disable":"readonly.enable",s="desktop"===t?this.opts.frame.width:this.opts.widthPreview.mobile+"px";if(e.css("width",s),"mobile"===t){this.template.getSourceBody();this.panel.addActive("mobile"),this.panel.disableButtons(["desktop","mobile"])}else this.panel.addActive("desktop"),this.panel.enableButtons();this.app.broadcast("adjustHeight",this),this.app.broadcast("setControlPosition"),this.app.broadcast(i,this)}}),l.add("module","code",{init:function(t){this.app=t,this.opts=t.opts,this.tidy=t.tidy,this.utils=t.utils,this.panel=t.panel,this.frame=t.frame,this.element=t.element,this.template=t.template,this.$textarea=!1,this.codeButton={name:"code",icon:this.opts.icons.code,callback:this._toggle.bind(this)}},onmessage:{built:function(){this.opts.code&&this._build()}},_build:function(){this.panel.add(this.codeButton,"right")},_buildTextarea:function(t,e){this.$textarea=l.dom("<textarea>"),this.$textarea.addClass("re-editor-textarea"),this.$textarea.attr("data-gramm_editor",!1),this.$textarea.height(e),this.$textarea.val(t),this.$textarea.on("keydown",this._handleKeydown.bind(this)),this.element.getElement().append(this.$textarea)},_handleKeydown:function(t){var e=t.keyCode||t.which,i=this.$textarea.get();if(9===e){t.preventDefault();var s=i.selectionStart;i.value=i.value.substring(0,i.selectionStart)+"    "+i.value.substring(i.selectionEnd),i.selectionEnd=s+4}},_toggle:function(){var t,e=this.frame.getElement();!1===this.$textarea?(t=this.template.getSource(),t=this.tidy.get(t),t=this.utils.replaceRgbToHex(t),e.hide(),this._buildTextarea(t,e.height()),this.panel.addActive("code"),this.panel.disableButtons(["code"])):(t=this.$textarea.val(),this.html=t,this.$textarea.remove(),this.$textarea=!1,this.frame.setCode(this.template.getInitialCode()),this.frame.load(this._load.bind(this)),e.show(),this.panel.addActive("desktop"),this.panel.enableButtons())},_load:function(){this.template.build(this.html),setTimeout(function(){this.frame.buildCss(),this.frame.buildUndo(),this.frame.buildClick(),this.app.broadcast("rebuilt",this),this.app.broadcast("images.observe",this),this.app.broadcast("adjustHeight",this)}.bind(this),100)}}),l.add("module","card",{init:function(t){this.app=t,this.$win=t.$win,this.opts=t.opts,this.tool=t.tool,this.utils=t.utils,this.slide=t.slide,this.frame=t.frame,this.control=t.control,this.animate=t.animate,this.editable=t.editable,this.dropdown=t.dropdown,this.template=t.template},onmessage:{built:function(){this._build()},rebuilt:function(){this._build()},changed:function(){this._setControlPosition()},setControlPosition:function(){this._setControlPosition()},card:{settings:function(t,e,i){this._toggleSettings(i)},duplicate:function(t,e,i){this._duplicate(i)},trash:function(t,e,i){this._trash(i)}},block:{added:function(t,e){this._rebuildBlock(e)},duplicated:function(t,e){this._rebuildBlock(e)},trashed:function(t,e){this._checkBlocks(e)}}},_checkBlocks:function(t){if(0===t.find(".re-block").length){var e=l.dom("<div>");e.attr("id","re-add-block-icon"),e.html(this.opts.icons["add-circle"]),e.on("click",function(){this.app.broadcast("block.addToCard",this,t)}.bind(this)),t.find("td").append(e);var i=t.attr("data-element-id");this.control.hide("card",i)}},_toggleSettings:function(t){t.removeClass("is-re-hover"),t.addClass("is-re-active"),this.dropdown.build(t,this.tool.build(t))},_duplicate:function(t){this.template.createSnapshot(),this.slide.close(),this.dropdown.close(),t.removeClass("is-re-hover");var e=t.dataget("instance").getSource(),i=e.clone(),s=this._addSpacer(t,e);s.$source.after(i);var o=this.template.parse(i);s.$card.after(o),this._buildCard(o),setTimeout(function(){var t=o.offset(),e=this.frame.getElement().offset(),i=function(){this.animate.start(o,"shake",this._duplicated.bind(this))}.bind(this);this.app.broadcast("adjustHeight",this),this.utils.scrollTo(document,e.top+t.top-20,500,i)}.bind(this),10)},_duplicated:function(t){this.app.broadcast("card.duplicated",this,t),this.app.broadcast("changed",this,t)},_trash:function(t){this.template.createSnapshot(),this.slide.close(),this.dropdown.close(),this.animate.start(t,"fadeOut",this._trashed.bind(this))},_trashed:function(t){var e=t.attr("data-element-id"),i=t.dataget("instance").getSource();this.control.remove("card",e),this._removeSpacer(t),i.remove(),t.remove(),this.app.broadcast("card.trashed",this),this.app.broadcast("adjustHeight",this),this.app.broadcast("changed",this)},_addSpacer:function(t,e){var i,s={},o=t.nextElement();return"spacer"===o.attr("data-element-type")?s={$card:o,$source:i=o.dataget("instance").getSource()}:"spacer"!==o.attr("data-element-type")&&!1!==this.opts.card.spacer?(i=l.dom('<re-spacer height="'+this.opts.card.spacer+'">'),o=this.template.create("spacer",{$source:i}),t.after(o),e.after(i),s={$card:o,$source:i}):s={$card:t,$source:e},s},_removeSpacer:function(t){var e=t.prevElement();if("spacer"===e.attr("data-element-type")){var i=e.dataget("instance").getSource();e.remove(),i.remove()}},_build:function(){!1!==this.opts.edit?this.frame.getCards().each(this._buildCard.bind(this)):this.frame.getCards().removeClass("re-card")},_buildCard:function(t,e){var i=l.dom(t);this.control.build("card",i,0===e),i.find(".re-block").each(function(t,i){this._buildBlock(t,e,i)}.bind(this)),this._repositionControls(),this._checkBlocks(i)},_rebuildBlock:function(t){var e=t.closest(".re-card");e.find(".re-block").length;e.find("#re-add-block-icon").remove(),this._buildBlock(t),this.app.broadcast("images.observe",this)},_repositionControls:function(){var t=this.frame.getWin(),e=l.dom(t);this.$win.off("resize.revolvapp-controls"),e.off("resize.revolvapp-controls"),this.$win.on("resize.revolvapp-controls",this._setControlPosition.bind(this)),e.on("resize.revolvapp-controls",this._setControlPosition.bind(this))},_setControlPosition:function(){var t=this.frame.getBody();t.find(".re-controls").each(function(e){var i=l.dom(e),s=i.attr("data-control-id"),o=t.find('[data-element-id="'+s+'"]'),a=o.hasClass("re-card")?o:o.closest(".re-card"),n=t.width(),r=a.innerWidth(),h=(o.innerHeight(),o.offset()),d=a.offset(),c=n<680?-40:4,p=h.top+"px",u=d.left+r+c+"px";i.css({top:p,left:u})}),this.app.broadcast("adjustHeight")},_buildBlock:function(t){var e=l.dom(t);e.find(".re-editable").each(this._buildEditable.bind(this)),e.find("a").on("click",function(t){t.preventDefault()}),e.on("click.revolvapp",this._handleBlockClick.bind(this))},_buildEditable:function(t){this.editable.build(t)},_handleBlockClick:function(t){var e=l.dom(t.target).closest(".re-block");this.app.broadcast("block.click",this,t,e)}}),l.add("module","block",{init:function(t){this.app=t,this.opts=t.opts,this.tool=t.tool,this.frame=t.frame,this.utils=t.utils,this.slide=t.slide,this.control=t.control,this.animate=t.animate,this.template=t.template},onmessage:{block:{addToCard:function(t,e){this._toggleAdd(e,"card")},add:function(t,e,i){this._toggleAdd(i)},settings:function(t,e,i){this._toggleSettings(i)},duplicate:function(t,e,i){this._duplicate(i)},trash:function(t,e,i){this._trash(i)},click:function(t,e,i){i.hasClass("is-re-readonly")||this._active(i)}}},_active:function(t){var e=this.frame.getBody();e.find(".re-block").removeClass("is-re-active"),e.find(".re-card").removeClass("is-re-active"),e.off("keydown.revolvapp-shortcuts"),this.control.hide("card"),this.control.hide("block"),t.addClass("is-re-active"),e.on("keydown.revolvapp-shortcuts",this._handleShortcuts.bind(this)),0===e.find("#re-slide").length?this.control.build("block",t):setTimeout(function(){this.control.build("block",t)}.bind(this),400)},_handleShortcuts:function(t){var e=t.which,i=(t.ctrlKey||t.metaKey)&&!t.altKey,s=this.frame.getBody().find(".re-block.is-re-active");if(0!==s.length)if(i&&t.shiftKey&&79===e)t.preventDefault(),this._toggleSettings(s);else if(i&&t.shiftKey&&65===e)t.preventDefault(),this._toggleAdd(s);else if(i&&t.shiftKey&&8===e)t.preventDefault(),this._trash(s);else if(!i&&!t.shiftKey&&9===e){t.preventDefault();var o=s.next();if(o.hasClass("re-block"))this._active(o);else(o=s.closest(".re-card").next().find(".re-block").first()).hasClass("re-block")&&this._active(o)}},_toggleAdd:function(t,e){var i=t.attr("data-element-id"),s=l.dom("<div>");for(var o in s.addClass("re-add-blocks"),this.opts.blocks){var a=this.opts.blocks[o],n=l.dom("<h5>");n.html(o),s.append(n);var r=l.dom("<div>"),h=0;for(var d in a){h++;var c=l.dom("<span>");c.attr("data-type",d),c.attr("data-name",o),c.attr("data-block",i),c.attr("data-card","card"===e),c.on("click",this._addBlock.bind(this));var p=l.dom("<img>");p.attr("src",this.opts.path+"img/svg/"+d+".svg?v"),c.append(p),r.append(c),3===h&&(r.append("<br>"),h=0)}s.append(r)}this.slide.build(t,s)},_addBlock:function(t){this.template.createSnapshot(),this.slide.close();var e=l.dom(t.target).closest("span"),i=e.attr("data-type"),s=e.attr("data-name"),o=e.attr("data-card"),a=e.attr("data-block"),n=this.frame.getBody().find('[data-element-id="'+a+'"]'),r=n.dataget("instance").getSource(),h=this.opts.blocks[s][i];h=(h=(h=h.replace(/{{\-\-image\-placeholder\-\-}}/gi,this.opts.path+"img/image-placeholder.png")).replace(/{{\-\-app\-store\-placeholder\-\-}}/gi,this.opts.path+"img/badge-app-store.png")).replace(/{{\-\-google\-play\-placeholder\-\-}}/gi,this.opts.path+"img/badge-google-play.png");var d=l.dom("<div>").html(h).children().first(),c=this.template.parse(d);o?(n.find("td").html(c),r.html(d)):(n.after(c),r.after(d)),this._active(c),this.app.broadcast("adjustHeight",this),this.app.broadcast("block.added",this,c),this.app.broadcast("changed",this,c);var p=c.offset(),u=this.frame.getElement().offset();this.utils.scrollTo(document,u.top+p.top-20,500)},_toggleSettings:function(t){this.slide.build(t,this.tool.build(t))},_duplicate:function(t){this.template.createSnapshot(),this.slide.close();var e=t.dataget("instance").getSource(),i=e.clone();e.after(i);var s=this.template.parse(i);t.after(s),this.app.broadcast("adjustHeight",this),setTimeout(function(){var t=s.offset(),e=this.frame.getElement().offset();this.utils.scrollTo(document.body,e.top+t.top-10,500),this.app.broadcast("block.duplicated",this,s),this.app.broadcast("changed",this,s),this._active(s)}.bind(this),10)},_trash:function(t){this.template.createSnapshot(),this.slide.close(),this.animate.start(t,"fadeOut",this._trashed.bind(this))},_trashed:function(t){var e=t.attr("data-element-id"),i=t.dataget("instance").getSource(),s=t.closest(".re-card");this.control.remove("block",e),this.control.show("card"),i.remove(),t.remove(),this.app.broadcast("block.trashed",this,s),this.app.broadcast("adjustHeight",this),this.app.broadcast("changed",this)}}),window.Revolvapp=window.$RE=l}();